{"version":3,"sources":["webpack:///./src/views/mine/forgetPassword.vue?ea8f","webpack:///src/views/mine/forgetPassword.vue","webpack:///./src/views/mine/forgetPassword.vue?8faa","webpack:///./src/views/mine/forgetPassword.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","$router","go","attrs","_v","_s","$t","handleSubmit","required","message","validator","validatorPhone","model","value","forgetPasswordForm","callback","$$v","$set","expression","validatorPhoneCode","codeNum","codeLoading","handleGetVerifyCode","slot","validatorPassword","submitLoading","staticRenderFns","name","data","phone","verifyCode","password","codeInterval","created","methods","test","val","$http","$toast","mask","destroyed","clearInterval","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,0BAA0B,CAACF,EAAG,SAAS,CAACE,YAAY,eAAe,CAACF,EAAG,OAAO,CAACE,YAAY,cAAcC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOR,EAAIS,QAAQC,IAAI,MAAM,CAACN,EAAG,WAAW,CAACO,MAAM,CAAC,aAAa,eAAe,GAAGP,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACN,EAAIY,GAAGZ,EAAIa,GAAGb,EAAIc,GAAG,sBAAsBV,EAAG,WAAW,CAACO,MAAM,CAAC,iBAAiB,IAAIJ,GAAG,CAAC,OAASP,EAAIe,eAAe,CAACX,EAAG,YAAY,CAACO,MAAM,CAAC,KAAO,MAAM,UAAY,GAAG,YAAcX,EAAIc,GAAG,wBAAwB,MAAQ,CAAC,CAAEE,UAAU,EAAMC,QAASjB,EAAIc,GAAG,yBAA2B,CAACI,UAAWlB,EAAImB,eAAgBF,QAASjB,EAAIc,GAAG,iCAAiCM,MAAM,CAACC,MAAOrB,EAAIsB,mBAAwB,MAAEC,SAAS,SAAUC,GAAMxB,EAAIyB,KAAKzB,EAAIsB,mBAAoB,QAASE,IAAME,WAAW,8BAA8BtB,EAAG,YAAY,CAACO,MAAM,CAAC,cAAc,MAAM,UAAY,GAAG,YAAcX,EAAIc,GAAG,uBAAuB,MAAQ,CAAC,CAAEE,UAAU,EAAMC,QAASjB,EAAIc,GAAG,wBAA0B,CAACI,UAAWlB,EAAI2B,mBAAoBV,QAASjB,EAAIc,GAAG,gCAAgCM,MAAM,CAACC,MAAOrB,EAAIsB,mBAA6B,WAAEC,SAAS,SAAUC,GAAMxB,EAAIyB,KAAKzB,EAAIsB,mBAAoB,aAAcE,IAAME,WAAW,kCAAkC,CAACtB,EAAG,aAAa,CAACO,MAAM,CAAC,KAAO,SAAS,MAAQ,GAAG,KAAO,QAAQ,KAAO,OAAO,SAAWX,EAAI4B,QAAU,EAAE,QAAU5B,EAAI6B,YAAY,eAAe7B,EAAIc,GAAG,0BAA0BP,GAAG,CAAC,MAAQP,EAAI8B,qBAAqBC,KAAK,UAAU,CAAC/B,EAAIY,GAAG,aAAaZ,EAAIa,GAAGb,EAAI4B,QAAU,EAAI5B,EAAI4B,QAAU5B,EAAIc,GAAG,yBAA2Bd,EAAIc,GAAG,uBAAuB,eAAe,GAAGV,EAAG,YAAY,CAACO,MAAM,CAAC,KAAO,WAAW,UAAY,GAAG,YAAcX,EAAIc,GAAG,2BAA2B,MAAQ,CAAC,CAAEE,UAAU,EAAMC,QAASjB,EAAIc,GAAG,4BAA8B,CAACI,UAAWlB,EAAIgC,kBAAmBf,QAASjB,EAAIc,GAAG,kCAAkCM,MAAM,CAACC,MAAOrB,EAAIsB,mBAA2B,SAAEC,SAAS,SAAUC,GAAMxB,EAAIyB,KAAKzB,EAAIsB,mBAAoB,WAAYE,IAAME,WAAW,iCAAiCtB,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,aAAa,CAACE,YAAY,YAAYK,MAAM,CAAC,KAAO,OAAO,QAAUX,EAAIiC,cAAc,eAAejC,EAAIc,GAAG,sBAAsB,CAACd,EAAIY,GAAG,aAAaZ,EAAIa,GAAGb,EAAIc,GAAG,kBAAkB,eAAe,IAAI,IAAI,IACv0EoB,EAAkB,GC0DtB,GACEC,KAAM,iBACNC,KAFF,WAGI,MAAO,CACLd,mBAAoB,CAClBe,MAAO,KACPC,WAAY,KACZC,SAAU,MAEZC,aAAc,KACdZ,QAAS,EACTC,aAAa,EACbI,eAAe,IAGnBQ,QAfF,aAgBEC,QAAS,CACPvB,eADJ,SACA,GACM,MAAO,YAAYwB,KAAKC,IAE1BjB,mBAJJ,SAIA,GACM,MAAO,UAAUgB,KAAKC,IAExBZ,kBAPJ,SAOA,GACM,MAAO,2CAA2CW,KAAKC,IAEzD7B,aAVJ,WAUA,WACUd,KAAKgC,gBAGThC,KAAKgC,eAAgB,EACrBhC,KAAK4C,MACX,KADA,0BACA,yBACA,kBACA,iBACU,EAAV,QACY,MAAZ,EACY,QAAZ,aAEU,EAAV,iBACU,EAAV,wBAEU,EAAV,oBAEA,mBACQ,EAAR,sBAGIf,oBAhCJ,WAgCA,WACW7B,KAAKqB,mBAAmBe,MAOzBpC,KAAK4B,cAGT5B,KAAK4B,aAAc,EACnB5B,KAAK4C,MACX,KADA,uBACA,CAAQ,MAAR,gCACA,kBACA,gBACU,EAAV,WACU,EAAV,qCACA,YACc,EAAd,WAEc,cAAd,gBACc,EAAd,aAEA,KACU,EAAV,QACY,MAAZ,EACY,QAAZ,gCAEU,EAAV,gBAEU,EAAV,kBAEA,mBACQ,EAAR,mBAhCQ5C,KAAK6C,OAAO,CACVC,MAAM,EACN9B,QAAShB,KAAKa,GAAG,4BAkCzBkC,UAtFF,WAuFIC,cAAchD,KAAKuC,gBClJgV,I,YCOnWU,EAAY,eACd,EACAnD,EACAmC,GACA,EACA,KACA,WACA,MAIa,aAAAgB,E","file":"js/chunk-2d0de01c.25acd6a2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"covid-page forget-page\"},[_c('header',{staticClass:\"page-header\"},[_c('span',{staticClass:\"header-back\",on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_c('svg-icon',{attrs:{\"icon-class\":\"gray-btn\"}})],1),_c('div',{staticClass:\"header-content\"},[_vm._v(_vm._s(_vm.$t('forget.title')))])]),_c('van-form',{attrs:{\"validate-first\":\"\"},on:{\"submit\":_vm.handleSubmit}},[_c('van-field',{attrs:{\"type\":\"tel\",\"clearable\":\"\",\"placeholder\":_vm.$t('register.input_phone'),\"rules\":[{ required: true, message: _vm.$t('register.input_phone') }, {validator: _vm.validatorPhone, message: _vm.$t('register.input_phone_error')}]},model:{value:(_vm.forgetPasswordForm.phone),callback:function ($$v) {_vm.$set(_vm.forgetPasswordForm, \"phone\", $$v)},expression:\"forgetPasswordForm.phone\"}}),_c('van-field',{attrs:{\"label-width\":\"150\",\"clearable\":\"\",\"placeholder\":_vm.$t('register.input_code'),\"rules\":[{ required: true, message: _vm.$t('register.input_code') }, {validator: _vm.validatorPhoneCode, message: _vm.$t('register.input_code_error')}]},model:{value:(_vm.forgetPasswordForm.verifyCode),callback:function ($$v) {_vm.$set(_vm.forgetPasswordForm, \"verifyCode\", $$v)},expression:\"forgetPasswordForm.verifyCode\"}},[_c('van-button',{attrs:{\"slot\":\"button\",\"plain\":\"\",\"size\":\"small\",\"type\":\"info\",\"disabled\":_vm.codeNum > 0,\"loading\":_vm.codeLoading,\"loading-text\":_vm.$t('register.code_sending')},on:{\"click\":_vm.handleGetVerifyCode},slot:\"button\"},[_vm._v(\"\\n        \"+_vm._s(_vm.codeNum > 0 ? _vm.codeNum + _vm.$t('register.code_waiting') : _vm.$t('register.code_send'))+\"\\n      \")])],1),_c('van-field',{attrs:{\"type\":\"password\",\"clearable\":\"\",\"placeholder\":_vm.$t('register.input_password'),\"rules\":[{ required: true, message: _vm.$t('register.input_password') }, {validator: _vm.validatorPassword, message: _vm.$t('register.password_placehold')}]},model:{value:(_vm.forgetPasswordForm.password),callback:function ($$v) {_vm.$set(_vm.forgetPasswordForm, \"password\", $$v)},expression:\"forgetPasswordForm.password\"}}),_c('div',{staticClass:\"covid-btns\"},[_c('van-button',{staticClass:\"covid-btn\",attrs:{\"type\":\"info\",\"loading\":_vm.submitLoading,\"loading-text\":_vm.$t('forget.submiting')}},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('forget.submit'))+\"\\n      \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"covid-page forget-page\">\r\n    <header class=\"page-header\">\r\n      <span class=\"header-back\" @click=\"$router.go(-1)\">\r\n        <svg-icon icon-class=\"gray-btn\"></svg-icon>\r\n      </span>\r\n      <div class=\"header-content\">{{$t('forget.title')}}</div>\r\n    </header>\r\n    <van-form validate-first @submit=\"handleSubmit\">\r\n      <van-field\r\n        v-model=\"forgetPasswordForm.phone\"\r\n        type=\"tel\"\r\n        clearable\r\n        :placeholder=\"$t('register.input_phone')\"\r\n        :rules=\"[{ required: true, message: $t('register.input_phone') }, {validator: validatorPhone, message: $t('register.input_phone_error')}]\"\r\n      />\r\n      <van-field\r\n        v-model=\"forgetPasswordForm.verifyCode\"\r\n        label-width=\"150\"\r\n        clearable\r\n        :placeholder=\"$t('register.input_code')\"\r\n        :rules=\"[{ required: true, message: $t('register.input_code') }, {validator: validatorPhoneCode, message: $t('register.input_code_error')}]\"\r\n      >\r\n        <van-button\r\n          slot=\"button\"\r\n          plain\r\n          size=\"small\"\r\n          @click=\"handleGetVerifyCode\"\r\n          type=\"info\"\r\n          :disabled=\"codeNum > 0\"\r\n          :loading=\"codeLoading\"\r\n          :loading-text=\"$t('register.code_sending')\"\r\n        >\r\n          {{codeNum > 0 ? codeNum + $t('register.code_waiting') : $t('register.code_send')}}\r\n        </van-button>\r\n      </van-field>\r\n      <van-field\r\n        v-model=\"forgetPasswordForm.password\"\r\n        type=\"password\"\r\n        clearable\r\n        :placeholder=\"$t('register.input_password')\"\r\n        :rules=\"[{ required: true, message: $t('register.input_password') }, {validator: validatorPassword, message: $t('register.password_placehold')}]\"\r\n      />\r\n      <div class=\"covid-btns\">\r\n        <van-button\r\n          type=\"info\"\r\n          class=\"covid-btn\"\r\n          :loading=\"submitLoading\"\r\n          :loading-text=\"$t('forget.submiting')\"\r\n        >\r\n          {{$t('forget.submit')}}\r\n        </van-button>\r\n      </div>\r\n    </van-form>\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"forgetPassword\",\r\n  data() {\r\n    return {\r\n      forgetPasswordForm: {\r\n        phone: null,\r\n        verifyCode: null,\r\n        password: null,\r\n      },\r\n      codeInterval: null,\r\n      codeNum: 0,\r\n      codeLoading: false,\r\n      submitLoading: false,\r\n    };\r\n  },\r\n  created() {},\r\n  methods: {\r\n    validatorPhone(val) {\r\n      return /^1\\d{10}$/.test(val);\r\n    },\r\n    validatorPhoneCode(val) {\r\n      return /^\\d{4}$/.test(val);\r\n    },\r\n    validatorPassword(val) {\r\n      return /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,16}$/.test(val);\r\n    },\r\n    handleSubmit() {\r\n      if (this.submitLoading) {\r\n        return;\r\n      }\r\n      this.submitLoading = true;\r\n      this.$http\r\n        .post(`/api/user/resetPassword`, this.forgetPasswordForm)\r\n        .then(response => {\r\n          if (response.data.code === 0) {\r\n            this.$toast({\r\n              mask: false,\r\n              message: response.data.msg\r\n            });\r\n            this.submitLoading = false;\r\n            this.$router.push(\"/login\");\r\n          } else {\r\n            this.submitLoading = false;\r\n          }\r\n        }).catch(error => {\r\n          this.submitLoading = false;\r\n        });\r\n    },\r\n    handleGetVerifyCode() {\r\n      if (!this.forgetPasswordForm.phone) {\r\n        this.$toast({\r\n          mask: false,\r\n          message: this.$t('register.phone_empty')\r\n        });\r\n        return;\r\n      }\r\n      if (this.codeLoading) {\r\n        return;\r\n      }\r\n      this.codeLoading = true;\r\n      this.$http\r\n        .post(`/api/aliyun/send_msg`, {\"phone\": this.forgetPasswordForm.phone})\r\n        .then(response => {\r\n          if (response.data.code == 0) {\r\n            this.codeNum = 60;\r\n            this.codeInterval = setInterval(()=>{\r\n              if (this.codeNum > 0) {\r\n                this.codeNum--;\r\n              } else {\r\n                clearInterval(this.codeInterval);\r\n                this.codeNum = 0;\r\n              }\r\n            }, 1000)\r\n            this.$toast({\r\n              mask: false,\r\n              message: this.$t('register.send_success')\r\n            });\r\n            this.codeLoading = false;\r\n          } else {\r\n            this.codeLoading = false;\r\n          }\r\n        }).catch(error => {\r\n          this.codeLoading = false;\r\n        });\r\n    }\r\n  },\r\n  destroyed() {\r\n    clearInterval(this.codeInterval);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./forgetPassword.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./forgetPassword.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./forgetPassword.vue?vue&type=template&id=cd5d8a74&scoped=true&\"\nimport script from \"./forgetPassword.vue?vue&type=script&lang=js&\"\nexport * from \"./forgetPassword.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cd5d8a74\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}