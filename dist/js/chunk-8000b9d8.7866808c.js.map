{"version":3,"sources":["webpack:///./src/views/single/index.vue?96ed","webpack:///./src/views/single/index.vue?18f9","webpack:///src/views/single/index.vue","webpack:///./src/views/single/index.vue?d367","webpack:///./src/views/single/index.vue","webpack:///./node_modules/exif-js/exif.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","_m","_v","_s","$t","directives","name","rawName","value","language","expression","step","uploadNeedLogin","isLogin","on","handleLogin","_e","max_test_enable","ip_enable","handleInput","handleCheck","handleNext","uploadImage","handleUpload","handleBack","text","gradientColor","model","callback","$$v","currentCircle","isNormalUser","result_healthy","label","prob","gradientColorHealthy","$set","cv19_low_risk","result_cv19","gradientColorCV19","order_timestamp","result_pulmonary","result_ocular","order_id","slice","showIpDisable","showMaxTestDisable","staticRenderFns","data","submitLoading","submitSuccess","circleInterval","photo_clip","maxImageSize","showHighRisk","extra_order_tip","extra_order_tip_form","extra_order_tip_show","extra_order_tip_columns","handleSubmitExtraLoading","needSubmitForm","cur_select_index","computed","toFixed","parseFloat","created","checkNeedLogin","checkIpEnable","checkMaxTest","methods","$http","orderTipOnOpen","index","options","options_hk","options_en","orderTipOnConfirm","val","e","preventDefault","setTimeout","that","size","outputSize","maxZoom","rotateFree","outputQuality","lrzOption","width","height","quality","load","file","orient","rotate","clip","destroy","setInterval","clearInterval","formData","append","localStorage","getItem","res","upload","handleSubmitExtra","extra","formdata","user_id","uid","uuid","JSON","stringify","map","key","$router","push","parseInt","destroyed","component","debug","EXIF","obj","EXIFwrapped","module","exports","ExifTags","Tags","TiffTags","GPSTags","0","IFD1Tags","StringValues","ExposureProgram","1","2","3","4","5","6","7","8","MeteringMode","255","LightSource","9","10","11","12","13","14","15","17","18","19","20","21","22","23","24","Flash","SensingMethod","SceneCaptureType","SceneType","CustomRendered","WhiteBalance","GainControl","Contrast","Saturation","Sharpness","SubjectDistanceRange","FileSource","Components","imageHasData","img","base64ToArrayBuffer","base64","contentType","match","replace","binary","atob","len","length","buffer","ArrayBuffer","view","Uint8Array","i","charCodeAt","objectURLToBlob","url","http","XMLHttpRequest","open","responseType","onload","status","response","send","getImageData","handleBinaryFile","binFile","findEXIFinJPEG","exifdata","iptcdata","findIPTCinJPEG","isXmpEnabled","xmpdata","findXMPinJPEG","call","src","test","arrayBuffer","fileReader","FileReader","target","result","blob","readAsArrayBuffer","self","Blob","File","console","log","byteLength","dataView","DataView","getUint8","marker","offset","readEXIFData","getUint16","isFieldSegmentStart","nameHeaderLength","startOffset","sectionLength","readIPTCData","IptcFieldMap","fieldValue","fieldName","dataSize","segmentType","segmentStartPos","getInt16","getStringFromDB","hasOwnProperty","Array","readTags","tiffStart","dirStart","strings","bigEnd","entryOffset","tag","entries","tags","readTagValue","vals","n","numerator","denominator","type","numValues","getUint32","valueOffset","Number","getInt32","getNextIFDOffset","readThumbnailImage","firstIFDOffset","IFD1OffsetPointer","thumbTags","JpegIFOffset","JpegIFByteCount","tOffset","tLength","start","outstr","String","fromCharCode","exifData","gpsData","tiffOffset","ExifIFDPointer","GPSInfoIFDPointer","dom","DOMParser","xmpString","xmpEndIndex","indexOf","substring","indexOfXmp","domDocument","parseFromString","xml2Object","xml2json","xml","json","nodeType","attributes","j","attribute","item","nodeName","nodeValue","hasChildNodes","childNodes","child","old","children","idx","itemAtt","dataKey","dataValue","undefined","textContent","message","enableXmp","disableXmp","getData","Image","HTMLImageElement","complete","getTag","getIptcTag","getAllTags","a","getAllIptcTags","pretty","strPretty","readFromBinaryFile"],"mappings":"gHAAA,yBAAuiB,EAAG,G,2CCA1iB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACF,EAAG,SAAS,CAACE,YAAY,eAAe,CAACF,EAAG,MAAM,CAACG,YAAY,CAAC,QAAU,OAAO,cAAc,WAAW,CAACH,EAAG,cAAc,CAACE,YAAY,cAAcE,MAAM,CAAC,GAAK,SAAS,IAAM,SAAS,CAACJ,EAAG,MAAM,CAACE,YAAY,cAAcE,MAAM,CAAC,IAAM,EAAQ,aAAkDR,EAAIS,GAAG,GAAGL,EAAG,MAAM,CAACE,YAAY,eAAeE,MAAM,CAAC,IAAM,EAAQ,YAAgD,GAAGJ,EAAG,cAAc,CAACE,YAAY,cAAcE,MAAM,CAAC,GAAK,QAAQ,IAAM,SAAS,CAACJ,EAAG,MAAM,CAACE,YAAY,cAAcE,MAAM,CAAC,IAAM,EAAQ,cAAmD,GAAGJ,EAAG,MAAM,CAACE,YAAY,eAAe,CAACN,EAAIU,GAAG,WAAWV,EAAIW,GAAGX,EAAIY,GAAG,eAAe,YAAYR,EAAG,MAAM,CAACS,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAuB,MAAhBhB,EAAIiB,SAAkBC,WAAW,qBAAqBZ,YAAY,aAAa,CAACN,EAAIU,GAAG,qCAAkD,GAAZV,EAAImB,KAAWf,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIU,GAAG,aAAaV,EAAIW,GAAGX,EAAIY,GAAG,uBAAuB,cAAeZ,EAAIoB,kBAAoBpB,EAAIqB,QAASjB,EAAG,aAAa,CAACE,YAAY,eAAeC,YAAY,CAAC,aAAa,QAAQC,MAAM,CAAC,KAAO,UAAUc,GAAG,CAAC,MAAQtB,EAAIuB,cAAc,CAACvB,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,GAAG,0BAA0BZ,EAAIwB,KAAMxB,EAAIyB,iBAAmBzB,EAAI0B,aAAe1B,EAAIoB,iBAAmBpB,EAAIqB,SAAUjB,EAAG,eAAe,CAACE,YAAY,iBAAiBC,YAAY,CAAC,aAAa,QAAQC,MAAM,CAAC,aAAaR,EAAI2B,YAAY,OAAS,UAAU,QAAU,SAAS,CAACvB,EAAG,aAAa,CAACE,YAAY,kCAAkCE,MAAM,CAAC,KAAO,WAAW,CAACR,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,GAAG,4BAA4B,GAAGZ,EAAIwB,KAAQxB,EAAIyB,iBAAoBzB,EAAI0B,WAAgB1B,EAAIoB,kBAAmBpB,EAAIqB,QAAkNrB,EAAIwB,KAA5MpB,EAAG,aAAa,CAACE,YAAY,kCAAkCC,YAAY,CAAC,aAAa,QAAQC,MAAM,CAAC,KAAO,UAAUc,GAAG,CAAC,MAAQtB,EAAI4B,cAAc,CAAC5B,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,GAAG,2BAAqCZ,EAAIyB,iBAAmBzB,EAAI0B,aAAe1B,EAAIoB,iBAAmBpB,EAAIqB,SAAUjB,EAAG,eAAe,CAACE,YAAY,iBAAiBE,MAAM,CAAC,aAAaR,EAAI2B,YAAY,OAAS,YAAY,CAACvB,EAAG,aAAa,CAACE,YAAY,eAAeE,MAAM,CAAC,KAAO,WAAW,CAACR,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,GAAG,4BAA4B,GAAGZ,EAAIwB,KAAQxB,EAAIyB,iBAAoBzB,EAAI0B,WAAgB1B,EAAIoB,kBAAmBpB,EAAIqB,QAA+LrB,EAAIwB,KAAzLpB,EAAG,aAAa,CAACE,YAAY,eAAeC,YAAY,CAAC,aAAa,QAAQC,MAAM,CAAC,KAAO,UAAUc,GAAG,CAAC,MAAQtB,EAAI4B,cAAc,CAAC5B,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,GAAG,2BAAoCR,EAAG,IAAI,CAACG,YAAY,CAAC,MAAQ,UAAU,aAAa,OAAO,YAAY,WAAW,CAACP,EAAIU,GAAG,aAAaV,EAAIW,GAAGX,EAAIY,GAAG,4BAA4B,cAAcR,EAAG,MAAM,CAACA,EAAG,IAAI,CAACG,YAAY,CAAC,MAAQ,UAAU,aAAa,SAAS,YAAY,WAAW,CAACP,EAAIU,GAAG,aAAaV,EAAIW,GAAGX,EAAIY,GAAG,wBAAwB,cAAcR,EAAG,IAAI,CAACG,YAAY,CAAC,MAAQ,UAAU,aAAa,SAAS,YAAY,WAAW,CAACP,EAAIU,GAAG,iBAAiBV,EAAIW,GAAGX,EAAIY,GAAG,wBAAwB,cAAcR,EAAG,IAAI,CAACG,YAAY,CAAC,MAAQ,UAAU,aAAa,OAAO,YAAY,WAAW,CAACP,EAAIU,GAAG,iBAAiBV,EAAIW,GAAGX,EAAIY,GAAG,wBAAwB,cAAcR,EAAG,IAAI,CAACG,YAAY,CAAC,MAAQ,UAAU,aAAa,OAAO,YAAY,WAAW,CAACP,EAAIU,GAAG,iBAAiBV,EAAIW,GAAGX,EAAIY,GAAG,wBAAwB,cAAcR,EAAG,IAAI,CAACG,YAAY,CAAC,MAAQ,UAAU,aAAa,OAAO,YAAY,WAAW,CAACP,EAAIU,GAAG,iBAAiBV,EAAIW,GAAGX,EAAIY,GAAG,wBAAwB,cAAcR,EAAG,IAAI,CAACG,YAAY,CAAC,MAAQ,UAAU,aAAa,OAAO,YAAY,WAAW,CAACP,EAAIU,GAAG,iBAAiBV,EAAIW,GAAGX,EAAIY,GAAG,wBAAwB,iBAAiB,GAAGZ,EAAIwB,KAAkB,GAAZxB,EAAImB,KAAWf,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,eAAe,CAACE,YAAY,iBAAiBE,MAAM,CAAC,aAAaR,EAAI2B,YAAY,OAAS,UAAU,QAAU,SAAS,CAACvB,EAAG,aAAa,CAACE,YAAY,eAAeE,MAAM,CAAC,KAAO,WAAW,CAACR,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,GAAG,4BAA4B,GAAGR,EAAG,eAAe,CAACE,YAAY,iBAAiBE,MAAM,CAAC,aAAaR,EAAI2B,YAAY,OAAS,YAAY,CAACvB,EAAG,aAAa,CAACE,YAAY,eAAeE,MAAM,CAAC,KAAO,WAAW,CAACR,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,GAAG,4BAA4B,IAAI,GAAGR,EAAG,MAAM,CAACE,YAAY,aAAaE,MAAM,CAAC,GAAK,cAAcJ,EAAG,aAAa,CAACE,YAAY,kCAAkCE,MAAM,CAAC,KAAO,UAAUc,GAAG,CAAC,MAAQtB,EAAI6B,aAAa,CAAC7B,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,GAAG,yBAAyBR,EAAG,MAAM,CAACE,YAAY,sBAAsB,CAACN,EAAIU,GAAG,aAAaV,EAAIW,GAAGX,EAAIY,GAAG,wBAAwBR,EAAG,MAAMJ,EAAIU,GAAG,aAAaV,EAAIW,GAAGX,EAAIY,GAAG,uBAAuB,cAAcR,EAAG,MAAM,CAACE,YAAY,gBAAgBE,MAAM,CAAC,IAAM,EAAQ,YAAkC,GAAGR,EAAIwB,KAAkB,GAAZxB,EAAImB,KAAWf,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIU,GAAG,aAAaV,EAAIW,GAAGX,EAAIY,GAAG,uBAAuB,cAAcR,EAAG,MAAM,CAACE,YAAY,sBAAsBE,MAAM,CAAC,IAAMR,EAAI8B,eAAe1B,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACN,EAAIU,GAAG,aAAaV,EAAIW,GAAGX,EAAIY,GAAG,uBAAuB,cAAcR,EAAG,MAAMA,EAAG,MAAMJ,EAAIU,GAAG,aAAaV,EAAIW,GAAGX,EAAIY,GAAG,uBAAuB,cAAcR,EAAG,MAAM,CAACE,YAAY,gBAAgBE,MAAM,CAAC,IAAM,EAAQ,WAAiCJ,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACF,EAAG,aAAa,CAACE,YAAY,kCAAkCE,MAAM,CAAC,KAAO,SAAS,KAAO,WAAWc,GAAG,CAAC,MAAQtB,EAAI+B,eAAe,CAAC/B,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,GAAG,yBAAyBR,EAAG,aAAa,CAACE,YAAY,eAAeE,MAAM,CAAC,KAAO,SAAS,KAAO,SAASc,GAAG,CAAC,MAAQtB,EAAIgC,aAAa,CAAChC,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,GAAG,0BAA0B,KAAKZ,EAAIwB,KAAkB,GAAZxB,EAAImB,KAAWf,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIU,GAAG,aAAaV,EAAIW,GAAGX,EAAIY,GAAG,uBAAuB,cAAcR,EAAG,aAAa,CAACG,YAAY,CAAC,aAAa,QAAQC,MAAM,CAAC,KAAO,GAAG,MAAQ,GAAG,KAAOR,EAAIiC,KAAK,eAAe,GAAG,cAAc,UAAU,MAAQjC,EAAIkC,cAAc,KAAO,OAAOC,MAAM,CAACnB,MAAOhB,EAAiB,cAAEoC,SAAS,SAAUC,GAAMrC,EAAIsC,cAAcD,GAAKnB,WAAW,oBAAoB,GAAGlB,EAAIwB,KAAkB,GAAZxB,EAAImB,KAAWf,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,aAAaC,YAAY,CAAC,aAAa,SAAS,CAACP,EAAIU,GAAG,aAAaV,EAAIW,GAAGX,EAAIY,GAAG,uBAAuB,cAAcR,EAAG,aAAa,CAACE,YAAY,eAAeC,YAAY,CAAC,aAAa,QAAQC,MAAM,CAAC,KAAO,UAAUc,GAAG,CAAC,MAAQtB,EAAIgC,aAAa,CAAChC,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,GAAG,+BAA+B,GAAGZ,EAAIwB,KAAkB,GAAZxB,EAAImB,KAAWf,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAAGN,EAAIuC,aAAqfvC,EAAIwB,KAA3epB,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,OAAO,CAACE,YAAY,gBAAgB,CAACN,EAAIU,GAAGV,EAAIW,GAAGX,EAAIwC,eAAeC,UAAUrC,EAAG,aAAa,CAACI,MAAM,CAAC,KAAOR,EAAIwC,eAAeE,KAAK,KAAO1C,EAAIwC,eAAeE,KAAO,IAAI,MAAQ,GAAG,iBAAiB,SAAS,eAAe,IAAI,cAAc,UAAU,MAAQ1C,EAAI2C,qBAAqB,KAAO,OAAOR,MAAM,CAACnB,MAAOhB,EAAIwC,eAAmB,KAAEJ,SAAS,SAAUC,GAAMrC,EAAI4C,KAAK5C,EAAIwC,eAAgB,OAAQH,IAAMnB,WAAW,0BAA0B,GAAYd,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,OAAO,CAACE,YAAY,gBAAgB,CAACN,EAAIU,GAAG,cAAeV,EAAiB,cAAEI,EAAG,OAAO,CAACE,YAAY,gBAAgB,CAACN,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,GAAG,wBAAwBZ,EAAIwB,KAAOxB,EAAI6C,cAAuH7C,EAAIwB,KAA5GpB,EAAG,OAAO,CAACE,YAAY,kCAAkC,CAACN,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,GAAG,yBAAkCR,EAAG,aAAa,CAACI,MAAM,CAAC,KAAOR,EAAI8C,YAAYJ,KAAK,KAAO1C,EAAI8C,YAAYJ,KAAO,IAAI,MAAQ,GAAG,iBAAiB,SAAS,eAAe,IAAI,cAAc,UAAU,MAAQ1C,EAAI+C,kBAAkB,KAAO,OAAOZ,MAAM,CAACnB,MAAOhB,EAAI8C,YAAgB,KAAEV,SAAS,SAAUC,GAAMrC,EAAI4C,KAAK5C,EAAI8C,YAAa,OAAQT,IAAMnB,WAAW,sBAAwBlB,EAAI6C,cAAqQ7C,EAAIwB,KAA1PpB,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,OAAO,CAACG,YAAY,CAAC,MAAQ,MAAM,cAAc,SAAS,CAACP,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,GAAG,6BAA6BR,EAAG,OAAO,CAACG,YAAY,CAAC,MAAQ,QAAQ,CAACP,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,GAAG,+BAAwCR,EAAG,OAAO,CAACG,YAAY,CAAC,aAAa,SAAS,YAAY,SAAS,cAAc,SAAS,CAACP,EAAIU,GAAGV,EAAIW,GAAGV,KAAK+C,qBAAqB,GAAKhD,EAAIuC,aAA8fvC,EAAIwB,KAApfpB,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,OAAO,CAACE,YAAY,gBAAgB,CAACN,EAAIU,GAAGV,EAAIW,GAAGX,EAAIiD,iBAAiBR,UAAUrC,EAAG,aAAa,CAACI,MAAM,CAAC,KAAOR,EAAIiD,iBAAiBP,KAAK,KAAO1C,EAAIiD,iBAAiBP,KAAO,IAAI,MAAQ,GAAG,iBAAiB,SAAS,eAAe,IAAI,cAAc,UAAU,MAAQ1C,EAAI+C,kBAAkB,KAAO,OAAOZ,MAAM,CAACnB,MAAOhB,EAAIiD,iBAAqB,KAAEb,SAAS,SAAUC,GAAMrC,EAAI4C,KAAK5C,EAAIiD,iBAAkB,OAAQZ,IAAMnB,WAAW,4BAA4B,GAAclB,EAAIuC,aAA4evC,EAAIwB,KAAlepB,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,OAAO,CAACE,YAAY,gBAAgB,CAACN,EAAIU,GAAGV,EAAIW,GAAGX,EAAIkD,cAAcT,UAAUrC,EAAG,aAAa,CAACI,MAAM,CAAC,KAAOR,EAAIkD,cAAcR,KAAK,KAAO1C,EAAIkD,cAAcR,KAAO,IAAI,MAAQ,GAAG,iBAAiB,SAAS,eAAe,IAAI,cAAc,UAAU,MAAQ1C,EAAI+C,kBAAkB,KAAO,OAAOZ,MAAM,CAACnB,MAAOhB,EAAIkD,cAAkB,KAAEd,SAAS,SAAUC,GAAMrC,EAAI4C,KAAK5C,EAAIkD,cAAe,OAAQb,IAAMnB,WAAW,yBAAyB,KAAcd,EAAG,aAAa,CAACE,YAAY,eAAeE,MAAM,CAAC,KAAO,UAAUc,GAAG,CAAC,MAAQtB,EAAIgC,aAAa,CAAChC,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,GAAG,8BAA8BR,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,IAAI,CAACG,YAAY,CAAC,eAAe,SAAS,MAAQ,QAAQ,YAAY,SAAS,cAAc,SAAS,CAACP,EAAIU,GAAG,mBAAmBV,EAAIW,GAAGV,KAAKkD,SAASC,OAAO,IAAI,mBAAmB,GAAGpD,EAAIwB,KAAKpB,EAAG,aAAa,CAACI,MAAM,CAAC,kBAAmB,EAAM,mBAAoB,GAAO2B,MAAM,CAACnB,MAAOhB,EAAiB,cAAEoC,SAAS,SAAUC,GAAMrC,EAAIqD,cAAchB,GAAKnB,WAAW,kBAAkB,CAACd,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACN,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,GAAG,8BAA8BR,EAAG,aAAa,CAACI,MAAM,CAAC,kBAAmB,EAAM,mBAAoB,GAAO2B,MAAM,CAACnB,MAAOhB,EAAsB,mBAAEoC,SAAS,SAAUC,GAAMrC,EAAIsD,mBAAmBjB,GAAKnB,WAAW,uBAAuB,CAACd,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACN,EAAIU,GAAGV,EAAIW,GAAGX,EAAIY,GAAG,8BAA8B,IACzqU2C,EAAkB,CAAC,WAAa,IAAIvD,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,IAAI,CAACE,YAAY,cAAcC,YAAY,CAAC,cAAc,UAAUC,MAAM,CAAC,KAAO,yBAAyB,CAACJ,EAAG,MAAM,CAACE,YAAY,cAAcE,MAAM,CAAC,IAAM,EAAQ,e,sMCqNlR,GACEM,KAAM,OACN0C,KAFF,WAGI,MAAO,CACLC,eAAe,EACfC,eAAe,EACftC,iBAAiB,EACjBC,QAAS,OAAf,OAAe,GACTJ,SAAU,OAAhB,OAAgB,GACVsB,aAAc,OAApB,OAAoB,GACdpB,KAAM,EACNW,YAAa,KACbQ,cAAe,EACfqB,eAAgB,KAChBC,WAAY,KACZ1B,cAAe,CACb,KAAM,UACN,OAAQ,WAEVS,qBAAsB,CACpB,KAAM,UACN,MAAO,UACP,OAAQ,WAEVI,kBAAmB,CACjB,KAAM,UACN,MAAO,UACP,OAAQ,WAEVc,aAAc,QACdrB,eAAgB,CAAtB,0BACMM,YAAa,CAAnB,uBACMG,iBAAkB,CAAxB,4BACMC,cAAe,CAArB,yBACMxB,WAAW,EACXD,iBAAiB,EACjB4B,eAAe,EACfC,oBAAoB,EACpBQ,cAAc,EACdC,gBAAiB,KACjBC,qBAAsB,GACtBC,sBAAsB,EACtBC,wBAAyB,GACzBC,0BAA0B,EAC1BC,gBAAgB,EAChBjB,SAAU,KACVkB,iBAAkB,EAClBrB,gBAAiB,OAGrBsB,SAAU,CACRrC,KADJ,WAEM,OAAOhC,KAAKqC,cAAciC,QAAQ,GAAK,KAEzC1B,cAJJ,WAKM,QAAI2B,WAAWvE,KAAK6C,YAAYJ,OAAS,MAO7C+B,QA9DF,WA+DIxE,KAAKyE,iBACLzE,KAAK0E,gBACL1E,KAAK2E,gBAEPC,QAAS,CACPH,eADJ,WACA,WACMzE,KAAK6E,MACX,IADA,qBAEA,kBACA,gBACU,EAAV,+BACY,GAAZ,gCACc,EAAd,iCACA,4BACc,GAAd,6BACgB,IAAhB,sBACgB,EAAhB,uBACkB,EAAlB,gDACkB,EAAlB,yDACkB,EAAlB,yDACkB,EAAlB,gCAEgB,EAAhB,kBAEA,YACgB,EAAhB,kBAEgB,EAAhB,0BAOIC,eA9BJ,SA8BA,KACM9E,KAAKiE,wBAA4C,OAAlBjE,KAAKgB,SAAoBhB,KAAK8D,gBAAgBiB,GAAOC,QAA4B,OAAlBhF,KAAKgB,SAAoBhB,KAAK8D,gBAAgBiB,GAAOE,WAAajF,KAAK8D,gBAAgBiB,GAAOG,WAC5LlF,KAAKoE,iBAAmBW,EACxB/E,KAAKgE,sBAAuB,GAE9BmB,kBAnCJ,SAmCA,GACMnF,KAAK+D,qBAAqB/D,KAAKoE,kBAAoBgB,EACnDpF,KAAKiE,wBAA0B,GAC/BjE,KAAKgE,sBAAuB,GAG9BU,cAzCJ,WAyCA,WACM1E,KAAK6E,MACX,IADA,8BAEA,kBACA,iBACU,EAAV,kCAKIF,aAnDJ,WAmDA,WACM3E,KAAK6E,MACX,IADA,6BAEA,kBACA,iBACU,EAAV,wCAIIlD,YA5DJ,SA4DA,GACM0D,EAAEC,iBACGtF,KAAKyB,UAEhB,uBACQzB,KAAKqD,oBAAqB,GAF1BrD,KAAKoD,eAAgB,GAKzB1B,YApEJ,SAoEA,cACM1B,KAAKkB,KAAO,EACZqE,YAAW,WACjB,MAAY,EAAZ,YACU,EAAV,qBAEQ,IAAR,IACQ,EAAR,6BACU,EAAV,mBACU,IAAV,iCACUC,EAAK7B,WAAa,IAAI,EAAhC,eACY8B,KAAM,CAAC,IAAK,IACZC,WAAY,CAAC,IAAK,KAClBC,QAAS,EACTC,YAAY,EACZC,cAAe,IACfC,UAAW,CACTC,MAAO,IACPC,OAAQ,IACRC,QAAS,KAGbT,EAAK7B,WAAWuC,KAAKC,EAAKA,MACX,IAAXC,GACFb,YAAW,WACTC,EAAK7B,WAAW0C,QAAQ,GAAI,KAC1C,YAKIzE,WAnGJ,WAoGM5B,KAAKkB,KAAO,EACZlB,KAAK6B,YAAc7B,KAAK2D,WAAW2C,OACnCtG,KAAK2D,WAAW4C,UAChBvG,KAAK2D,WAAa,MAEpB5B,WAzGJ,WA0GM/B,KAAKkB,KAAO,EACZlB,KAAK2D,WAAW4C,UAChBvG,KAAK2D,WAAa,KAClB3D,KAAK2E,eACL3E,KAAK0E,iBAEP5C,aAhHJ,WAgHA,WACM,IAAI9B,KAAKwD,cAAT,CAGAxD,KAAKwD,eAAgB,EACrBxD,KAAKyD,eAAgB,EACrBzD,KAAKqC,cAAgB,EACrBrC,KAAKkB,KAAO,EACZ,IAAN,+CACMlB,KAAK0D,eAAiB8C,aAAY,WAC5B,EAAZ,iBACU,EAAV,gBACA,uCACU,EAAV,kBACc,EAAd,eACY,EAAZ,OAEY,EAAZ,OAEUC,cAAc,EAAxB,mBAEA,IAEM,IAAN,eACMC,EAASC,OAAO,OAAQ,KACY,MAAhCC,aAAaC,QAAQ,SACvBH,EAASC,OAAO,OAAQC,aAAaC,QAAQ,SAET,MAAlCD,aAAaC,QAAQ,WACvBH,EAASC,OAAO,SAAUC,aAAaC,QAAQ,WAE7CV,EAAKV,KAAOzF,KAAK4D,aACnB,EAAR,kEAEU8C,EAASC,OAAO,OAAQG,GACxB,EAAV,cAGQJ,EAASC,OAAO,OAAQR,GACxBnG,KAAK+G,OAAOL,MAGhBK,OA1JJ,SA0JA,cACM/G,KAAK6E,MACX,KADA,mBACA,GAAQ,QAAR,OACA,kBACQ,GAAR,gBACU,EAAV,iBACU,IAAV,cACU,EAAV,sCACU,EAAV,gCACU,EAAV,0CACU,EAAV,oCACU,EAAV,cACU,IAAV,kCACA,gDACA,mCACU,EAAV,0DAAY,OAAZ,IACA,cACY,aAAZ,wBAEA,uDACY,EAAZ,iBAEU,EAAV,+BAAY,MAAZ,cAAY,QAAZ,SAAY,UAAZ,qCACU,EAAV,sBAEU,EAAV,+BAAY,MAAZ,cAAY,QAAZ,SAAY,UAAZ,qCACU,cAAV,kBACU,EAAV,gBACU,EAAV,iBACU,EAAV,UAEA,mBACQ,cAAR,kBACQ,EAAR,gBACQ,EAAR,iBACQ,EAAR,WAGImC,kBAhMJ,WAgMA,WACM,IAAIhH,KAAKkE,yBAAT,CAGA,IAAN,GACQhB,SAAUlD,KAAKkD,SACf+D,MAAO,IAELjH,KAAKoB,QACP8F,EAASC,QAAUP,aAAaC,QAAQ,QAAQO,IAEhDF,EAASG,KAAOT,aAAaC,QAAQ,QAEvCK,EAASD,MAAQK,KAAKC,UAAUvH,KAAK8D,gBAAgB0D,KAAI,SAA/D,KACQ,MAAO,CACLC,IAAV,OAAe,EAAf,yDACU1G,MAAO,EAAjB,6BAGMf,KAAK6E,MACX,KADA,yBACA,GACA,kBACA,gBACA,qCACY,EAAZ,iBAEU,EAAV,QAEU,EAAV,QACY,MAAZ,EACY,QAAZ,oBAGA,mBACQ,EAAR,QACU,MAAV,EACU,QAAV,sBAIIvD,YAxOJ,WAyOMtB,KAAK0H,QAAQC,KAAK,WAEpBC,SA3OJ,wHA2OA,GACM,OAAOA,SAAS7G,OAGpB8G,UAlTF,WAmT+B,MAAvB7H,KAAK0D,gBACP+C,cAAczG,KAAK0D,gBAEE,MAAnB1D,KAAK2D,YACP3D,KAAK2D,WAAW4C,YC7gBwU,I,wBCQ1VuB,EAAY,eACd,EACAhI,EACAwD,GACA,EACA,KACA,KACA,MAIa,aAAAwE,E,gCCnBf,oBAEI,IAAIC,GAAQ,EAIRC,EAAO,SAASC,GAChB,OAAIA,aAAeD,EAAaC,EAC1BjI,gBAAgBgI,OACtBhI,KAAKkI,YAAcD,GADiB,IAAID,EAAKC,IAKRE,EAAOC,UACxCA,EAAUD,EAAOC,QAAUJ,GAE/BI,EAAQJ,KAAOA,EAKnB,IAAIK,EAAWL,EAAKM,KAAO,CAGvB,MAAS,cACT,MAAS,kBAGT,MAAS,aAGT,MAAS,kBACT,MAAS,kBACT,MAAS,0BACT,MAAS,yBAGT,MAAS,YACT,MAAS,cAGT,MAAS,mBAGT,MAAS,mBACT,MAAS,oBACT,MAAS,aACT,MAAS,qBACT,MAAS,sBAGT,MAAS,eACT,MAAS,UACT,MAAS,kBACT,MAAS,sBACT,MAAS,kBACT,MAAS,OACT,MAAS,oBACT,MAAS,gBACT,MAAS,kBACT,MAAS,eACT,MAAS,mBACT,MAAS,kBACT,MAAS,eACT,MAAS,cACT,MAAS,QACT,MAAS,cACT,MAAS,cACT,MAAS,cACT,MAAS,2BACT,MAAS,wBACT,MAAS,wBACT,MAAS,2BACT,MAAS,kBACT,MAAS,gBACT,MAAS,gBACT,MAAS,aACT,MAAS,YACT,MAAS,aACT,MAAS,iBACT,MAAS,eACT,MAAS,eACT,MAAS,oBACT,MAAS,wBACT,MAAS,mBACT,MAAS,cACT,MAAS,WACT,MAAS,aACT,MAAS,YACT,MAAS,2BACT,MAAS,uBAGT,MAAS,6BACT,MAAS,iBAGTC,EAAWP,EAAKO,SAAW,CAC3B,IAAS,aACT,IAAS,cACT,MAAS,iBACT,MAAS,oBACT,MAAS,6BACT,IAAS,gBACT,IAAS,cACT,IAAS,4BACT,IAAS,cACT,IAAS,kBACT,IAAS,sBACT,IAAS,mBACT,IAAS,mBACT,IAAS,cACT,IAAS,cACT,IAAS,iBACT,IAAS,eACT,IAAS,eACT,IAAS,kBACT,IAAS,wBACT,IAAS,8BACT,IAAS,mBACT,IAAS,aACT,IAAS,wBACT,IAAS,oBACT,IAAS,sBACT,IAAS,WACT,IAAS,mBACT,IAAS,OACT,IAAS,QACT,IAAS,WACT,IAAS,SACT,MAAS,aAGTC,EAAUR,EAAKQ,QAAU,CACzBC,EAAS,eACT,EAAS,iBACT,EAAS,cACT,EAAS,kBACT,EAAS,eACT,EAAS,iBACT,EAAS,cACT,EAAS,eACT,EAAS,gBACT,EAAS,YACT,GAAS,iBACT,GAAS,SACT,GAAS,cACT,GAAS,WACT,GAAS,cACT,GAAS,WACT,GAAS,qBACT,GAAS,kBACT,GAAS,cACT,GAAS,qBACT,GAAS,kBACT,GAAS,sBACT,GAAS,mBACT,GAAS,oBACT,GAAS,iBACT,GAAS,qBACT,GAAS,kBACT,GAAS,sBACT,GAAS,qBACT,GAAS,eACT,GAAS,mBAITC,EAAWV,EAAKU,SAAW,CAC3B,IAAQ,aACR,IAAQ,cACR,IAAQ,gBACR,IAAQ,cACR,IAAQ,4BACR,IAAQ,eACR,IAAQ,cACR,IAAQ,kBACR,IAAQ,eACR,IAAQ,kBACR,IAAQ,cACR,IAAQ,cACR,IAAQ,sBACR,IAAQ,iBACR,IAAQ,eACR,IAAQ,kBACR,IAAQ,oBACR,IAAQ,mBACR,IAAQ,mBACR,IAAQ,uBAGRC,EAAeX,EAAKW,aAAe,CACnCC,gBAAkB,CACdH,EAAI,cACJI,EAAI,SACJC,EAAI,iBACJC,EAAI,oBACJC,EAAI,mBACJC,EAAI,mBACJC,EAAI,iBACJC,EAAI,gBACJC,EAAI,kBAERC,aAAe,CACXZ,EAAI,UACJI,EAAI,UACJC,EAAI,wBACJC,EAAI,OACJC,EAAI,YACJC,EAAI,UACJC,EAAI,UACJI,IAAM,SAEVC,YAAc,CACVd,EAAI,UACJI,EAAI,WACJC,EAAI,cACJC,EAAI,gCACJC,EAAI,QACJQ,EAAI,eACJC,GAAK,iBACLC,GAAK,QACLC,GAAK,wCACLC,GAAK,yCACLC,GAAK,0CACLC,GAAK,sCACLC,GAAK,mBACLC,GAAK,mBACLC,GAAK,mBACLC,GAAK,MACLC,GAAK,MACLC,GAAK,MACLC,GAAK,MACLC,GAAK,sBACLhB,IAAM,SAEViB,MAAQ,CACJ9B,EAAS,qBACT,EAAS,cACT,EAAS,mCACT,EAAS,+BACT,EAAS,qCACT,GAAS,gEACT,GAAS,4DACT,GAAS,4CACT,GAAS,gCACT,GAAS,yBACT,GAAS,oDACT,GAAS,gDACT,GAAS,oBACT,GAAS,sCACT,GAAS,iEACT,GAAS,6DACT,GAAS,6DACT,GAAS,wFACT,GAAS,oFACT,GAAS,iDACT,GAAS,4EACT,GAAS,yEAEb+B,cAAgB,CACZ3B,EAAI,cACJC,EAAI,6BACJC,EAAI,6BACJC,EAAI,+BACJC,EAAI,+BACJE,EAAI,mBACJC,EAAI,kCAERqB,iBAAmB,CACfhC,EAAI,WACJI,EAAI,YACJC,EAAI,WACJC,EAAI,eAER2B,UAAY,CACR7B,EAAI,yBAER8B,eAAiB,CACblC,EAAI,iBACJI,EAAI,kBAER+B,aAAe,CACXnC,EAAI,qBACJI,EAAI,wBAERgC,YAAc,CACVpC,EAAI,OACJI,EAAI,cACJC,EAAI,eACJC,EAAI,gBACJC,EAAI,kBAER8B,SAAW,CACPrC,EAAI,SACJI,EAAI,OACJC,EAAI,QAERiC,WAAa,CACTtC,EAAI,SACJI,EAAI,iBACJC,EAAI,mBAERkC,UAAY,CACRvC,EAAI,SACJI,EAAI,OACJC,EAAI,QAERmC,qBAAuB,CACnBxC,EAAI,UACJI,EAAI,QACJC,EAAI,aACJC,EAAI,gBAERmC,WAAa,CACTnC,EAAI,OAGRoC,WAAa,CACT1C,EAAI,GACJI,EAAI,IACJC,EAAI,KACJC,EAAI,KACJC,EAAI,IACJC,EAAI,IACJC,EAAI,MAYZ,SAASkC,EAAaC,GAClB,QAAUA,EAAY,SAI1B,SAASC,EAAoBC,EAAQC,GACjCA,EAAcA,GAAeD,EAAOE,MAAM,8BAA8B,IAAM,GAC9EF,EAASA,EAAOG,QAAQ,8BAA+B,IAKvD,IAJA,IAAIC,EAASC,KAAKL,GACdM,EAAMF,EAAOG,OACbC,EAAS,IAAIC,YAAYH,GACzBI,EAAO,IAAIC,WAAWH,GACjBI,EAAI,EAAGA,EAAIN,EAAKM,IACrBF,EAAKE,GAAKR,EAAOS,WAAWD,GAEhC,OAAOJ,EAGX,SAASM,EAAgBC,EAAKnK,GAC1B,IAAIoK,EAAO,IAAIC,eACfD,EAAKE,KAAK,MAAOH,GAAK,GACtBC,EAAKG,aAAe,OACpBH,EAAKI,OAAS,SAAStH,GACA,KAAfrF,KAAK4M,QAAiC,IAAhB5M,KAAK4M,QAC3BzK,EAASnC,KAAK6M,WAGtBN,EAAKO,OAGT,SAASC,EAAa1B,EAAKlJ,GACvB,SAAS6K,EAAiBC,GACtB,IAAI1J,EAAO2J,EAAeD,GAC1B5B,EAAI8B,SAAW5J,GAAQ,GACvB,IAAI6J,EAAWC,EAAeJ,GAE9B,GADA5B,EAAI+B,SAAWA,GAAY,GACvBpF,EAAKsF,aAAc,CACpB,IAAIC,EAASC,EAAcP,GAC3B5B,EAAIkC,QAAUA,GAAW,GAExBpL,GACAA,EAASsL,KAAKpC,GAItB,GAAIA,EAAIqC,IACJ,GAAI,WAAWC,KAAKtC,EAAIqC,KAAM,CAC1B,IAAIE,EAActC,EAAoBD,EAAIqC,KAC1CV,EAAiBY,QAEd,GAAI,WAAWD,KAAKtC,EAAIqC,KAAM,CACjC,IAAIG,EAAa,IAAIC,WACrBD,EAAWlB,OAAS,SAAStH,GACzB2H,EAAiB3H,EAAE0I,OAAOC,SAE9B3B,EAAgBhB,EAAIqC,KAAK,SAAUO,GAC/BJ,EAAWK,kBAAkBD,UAE9B,CACH,IAAI1B,EAAO,IAAIC,eACfD,EAAKI,OAAS,WACV,GAAmB,KAAf3M,KAAK4M,QAAiC,IAAhB5M,KAAK4M,OAG3B,KAAM,uBAFNI,EAAiBT,EAAKM,UAI1BN,EAAO,MAEXA,EAAKE,KAAK,MAAOpB,EAAIqC,KAAK,GAC1BnB,EAAKG,aAAe,cACpBH,EAAKO,KAAK,WAEX,GAAIqB,KAAKL,aAAezC,aAAe8C,KAAKC,MAAQ/C,aAAe8C,KAAKE,MAAO,CAC9ER,EAAa,IAAIC,WACrBD,EAAWlB,OAAS,SAAStH,GACrB0C,GAAOuG,QAAQC,IAAI,sBAAwBlJ,EAAE0I,OAAOC,OAAOQ,YAC/DxB,EAAiB3H,EAAE0I,OAAOC,SAG9BH,EAAWK,kBAAkB7C,IAIrC,SAAS6B,EAAe/G,GACpB,IAAIsI,EAAW,IAAIC,SAASvI,GAG5B,GADI4B,GAAOuG,QAAQC,IAAI,sBAAwBpI,EAAKqI,YACvB,KAAxBC,EAASE,SAAS,IAAwC,KAAxBF,EAASE,SAAS,GAErD,OADI5G,GAAOuG,QAAQC,IAAI,qBAChB,EAGX,IAEIK,EAFAC,EAAS,EACT/C,EAAS3F,EAAKqI,WAGlB,MAAOK,EAAS/C,EAAQ,CACpB,GAAiC,KAA7B2C,EAASE,SAASE,GAElB,OADI9G,GAAOuG,QAAQC,IAAI,gCAAkCM,EAAS,YAAcJ,EAASE,SAASE,KAC3F,EASX,GANAD,EAASH,EAASE,SAASE,EAAS,GAChC9G,GAAOuG,QAAQC,IAAIK,GAKT,KAAVA,EAGA,OAFI7G,GAAOuG,QAAQC,IAAI,uBAEhBO,EAAaL,EAAUI,EAAS,EAAGJ,EAASM,UAAUF,EAAS,GAAK,GAK3EA,GAAU,EAAIJ,EAASM,UAAUF,EAAO,IAOpD,SAASxB,EAAelH,GACpB,IAAIsI,EAAW,IAAIC,SAASvI,GAG5B,GADI4B,GAAOuG,QAAQC,IAAI,sBAAwBpI,EAAKqI,YACvB,KAAxBC,EAASE,SAAS,IAAwC,KAAxBF,EAASE,SAAS,GAErD,OADI5G,GAAOuG,QAAQC,IAAI,qBAChB,EAGX,IAAIM,EAAS,EACT/C,EAAS3F,EAAKqI,WAGdQ,EAAsB,SAASP,EAAUI,GACzC,OACkC,KAA9BJ,EAASE,SAASE,IACc,KAAhCJ,EAASE,SAASE,EAAO,IACO,KAAhCJ,EAASE,SAASE,EAAO,IACO,KAAhCJ,EAASE,SAASE,EAAO,IACO,IAAhCJ,EAASE,SAASE,EAAO,IACO,IAAhCJ,EAASE,SAASE,EAAO,IAIjC,MAAOA,EAAS/C,EAAQ,CAEpB,GAAKkD,EAAoBP,EAAUI,GAAS,CAGxC,IAAII,EAAmBR,EAASE,SAASE,EAAO,GAC7CI,EAAmB,IAAM,IAAGA,GAAoB,GAE3B,IAArBA,IAECA,EAAmB,GAGvB,IAAIC,EAAcL,EAAS,EAAII,EAC3BE,EAAgBV,EAASM,UAAUF,EAAS,EAAII,GAEpD,OAAOG,EAAajJ,EAAM+I,EAAaC,GAQ3CN,KAKR,IAAIQ,EAAe,CACf,IAAO,UACP,IAAO,SACP,GAAO,WACP,GAAO,cACP,GAAO,SACP,GAAO,cACP,IAAO,gBACP,IAAO,WACP,IAAO,YACP,GAAO,YAEX,SAASD,EAAajJ,EAAM+I,EAAaC,GACrC,IAEIG,EAAYC,EAAWC,EAAUC,EAFjChB,EAAW,IAAIC,SAASvI,GACxB5C,EAAO,GAEPmM,EAAkBR,EACtB,MAAMQ,EAAkBR,EAAYC,EACU,KAAvCV,EAASE,SAASe,IAAsE,IAAzCjB,EAASE,SAASe,EAAgB,KAChFD,EAAchB,EAASE,SAASe,EAAgB,GAC7CD,KAAeJ,IACdG,EAAWf,EAASkB,SAASD,EAAgB,GAC/BF,EAAW,EACzBD,EAAYF,EAAaI,GACzBH,EAAaM,EAAgBnB,EAAUiB,EAAgB,EAAGF,GAEvDjM,EAAKsM,eAAeN,GAEhBhM,EAAKgM,aAAsBO,MAC1BvM,EAAKgM,GAAW5H,KAAK2H,GAGrB/L,EAAKgM,GAAa,CAAChM,EAAKgM,GAAYD,GAIxC/L,EAAKgM,GAAaD,IAK9BI,IAEJ,OAAOnM,EAKX,SAASwM,EAAS5J,EAAM6J,EAAWC,EAAUC,EAASC,GAClD,IAEIC,EAAaC,EACblE,EAHAmE,EAAUnK,EAAK4I,UAAUkB,GAAWE,GACpCI,EAAO,GAIX,IAAKpE,EAAE,EAAEA,EAAEmE,EAAQnE,IACfiE,EAAcH,EAAa,GAAF9D,EAAO,EAChCkE,EAAMH,EAAQ/J,EAAK4I,UAAUqB,GAAcD,KACtCE,GAAOtI,GAAOuG,QAAQC,IAAI,gBAAkBpI,EAAK4I,UAAUqB,GAAcD,IAC9EI,EAAKF,GAAOG,EAAarK,EAAMiK,EAAaJ,EAAWC,EAAUE,GAErE,OAAOI,EAIX,SAASC,EAAarK,EAAMiK,EAAaJ,EAAWC,EAAUE,GAC1D,IAGItB,EACA4B,EAAMrL,EAAKsL,EACXC,EAAWC,EALXC,EAAO1K,EAAK4I,UAAUqB,EAAY,GAAID,GACtCW,EAAY3K,EAAK4K,UAAUX,EAAY,GAAID,GAC3Ca,EAAc7K,EAAK4K,UAAUX,EAAY,GAAID,GAAUH,EAK3D,OAAQa,GACJ,KAAK,EACL,KAAK,EACD,GAAiB,GAAbC,EACA,OAAO3K,EAAKwI,SAASyB,EAAc,GAAID,GAIvC,IAFAtB,EAASiC,EAAY,EAAIE,EAAeZ,EAAc,EACtDK,EAAO,GACFC,EAAE,EAAEA,EAAEI,EAAUJ,IACjBD,EAAKC,GAAKvK,EAAKwI,SAASE,EAAS6B,GAErC,OAAOD,EAGf,KAAK,EAED,OADA5B,EAASiC,EAAY,EAAIE,EAAeZ,EAAc,EAC/CR,EAAgBzJ,EAAM0I,EAAQiC,EAAU,GAEnD,KAAK,EACD,GAAiB,GAAbA,EACA,OAAO3K,EAAK4I,UAAUqB,EAAc,GAAID,GAIxC,IAFAtB,EAASiC,EAAY,EAAIE,EAAeZ,EAAc,EACtDK,EAAO,GACFC,EAAE,EAAEA,EAAEI,EAAUJ,IACjBD,EAAKC,GAAKvK,EAAK4I,UAAUF,EAAS,EAAE6B,GAAIP,GAE5C,OAAOM,EAGf,KAAK,EACD,GAAiB,GAAbK,EACA,OAAO3K,EAAK4K,UAAUX,EAAc,GAAID,GAGxC,IADAM,EAAO,GACFC,EAAE,EAAEA,EAAEI,EAAUJ,IACjBD,EAAKC,GAAKvK,EAAK4K,UAAUC,EAAc,EAAEN,GAAIP,GAEjD,OAAOM,EAGf,KAAK,EACD,GAAiB,GAAbK,EAMA,OALAH,EAAYxK,EAAK4K,UAAUC,GAAcb,GACzCS,EAAczK,EAAK4K,UAAUC,EAAY,GAAIb,GAC7C/K,EAAM,IAAI6L,OAAON,EAAYC,GAC7BxL,EAAIuL,UAAYA,EAChBvL,EAAIwL,YAAcA,EACXxL,EAGP,IADAqL,EAAO,GACFC,EAAE,EAAEA,EAAEI,EAAUJ,IACjBC,EAAYxK,EAAK4K,UAAUC,EAAc,EAAEN,GAAIP,GAC/CS,EAAczK,EAAK4K,UAAUC,EAAY,EAAI,EAAEN,GAAIP,GACnDM,EAAKC,GAAK,IAAIO,OAAON,EAAYC,GACjCH,EAAKC,GAAGC,UAAYA,EACpBF,EAAKC,GAAGE,YAAcA,EAE1B,OAAOH,EAGf,KAAK,EACD,GAAiB,GAAbK,EACA,OAAO3K,EAAK+K,SAASd,EAAc,GAAID,GAGvC,IADAM,EAAO,GACFC,EAAE,EAAEA,EAAEI,EAAUJ,IACjBD,EAAKC,GAAKvK,EAAK+K,SAASF,EAAc,EAAEN,GAAIP,GAEhD,OAAOM,EAGf,KAAK,GACD,GAAiB,GAAbK,EACA,OAAO3K,EAAK+K,SAASF,GAAcb,GAAUhK,EAAK+K,SAASF,EAAY,GAAIb,GAG3E,IADAM,EAAO,GACFC,EAAE,EAAEA,EAAEI,EAAUJ,IACjBD,EAAKC,GAAKvK,EAAK+K,SAASF,EAAc,EAAEN,GAAIP,GAAUhK,EAAK+K,SAASF,EAAY,EAAI,EAAEN,GAAIP,GAE9F,OAAOM,GASvB,SAASU,EAAiB1C,EAAUwB,EAAUE,GAE1C,IAAIG,EAAU7B,EAASM,UAAUkB,GAAWE,GAM5C,OAAO1B,EAASsC,UAAUd,EAAW,EAAc,GAAVK,GAAeH,GAG5D,SAASiB,EAAmB3C,EAAUuB,EAAWqB,EAAgBlB,GAE7D,IAAImB,EAAoBH,EAAiB1C,EAAUuB,EAAUqB,EAAgBlB,GAE7E,IAAKmB,EAED,MAAO,GAEN,GAAIA,EAAoB7C,EAASD,WAElC,MAAO,GAIX,IAAI+C,EAAYxB,EAAStB,EAAUuB,EAAWA,EAAYsB,EAAmB5I,EAAUyH,GAUvF,GAAIoB,EAAU,eAGV,OAAQA,EAAU,gBACd,KAAK,EAED,GAAIA,EAAUC,cAAgBD,EAAUE,gBAAiB,CAErD,IAAIC,EAAU1B,EAAYuB,EAAUC,aAChCG,EAAUJ,EAAUE,gBACxBF,EAAU,QAAU,IAAInD,KAAK,CAAC,IAAIlC,WAAWuC,EAAS1C,OAAQ2F,EAASC,IAAW,CAC9Ed,KAAM,eAGlB,MAEJ,KAAK,EACDvC,QAAQC,IAAI,6DACZ,MACJ,QACID,QAAQC,IAAI,sCAAuCgD,EAAU,qBAGlB,GAA1CA,EAAU,8BACfjD,QAAQC,IAAI,4DAEhB,OAAOgD,EAGX,SAAS3B,EAAgB7D,EAAQ6F,EAAO9F,GACpC,IAAI+F,EAAS,GACb,IAAKnB,EAAIkB,EAAOlB,EAAIkB,EAAM9F,EAAQ4E,IAC9BmB,GAAUC,OAAOC,aAAahG,EAAO4C,SAAS+B,IAElD,OAAOmB,EAGX,SAAS/C,EAAa3I,EAAMyL,GACxB,GAAuC,QAAnChC,EAAgBzJ,EAAMyL,EAAO,GAE7B,OADI7J,GAAOuG,QAAQC,IAAI,wBAA0BqB,EAAgBzJ,EAAMyL,EAAO,KACvE,EAGX,IAAIzB,EACAI,EAAMF,EACN2B,EAAUC,EACVC,EAAaN,EAAQ,EAGzB,GAAkC,OAA9BzL,EAAK4I,UAAUmD,GACf/B,GAAS,MACN,IAAkC,OAA9BhK,EAAK4I,UAAUmD,GAItB,OADInK,GAAOuG,QAAQC,IAAI,+CAChB,EAHP4B,GAAS,EAMb,GAA6C,IAAzChK,EAAK4I,UAAUmD,EAAW,GAAI/B,GAE9B,OADIpI,GAAOuG,QAAQC,IAAI,qCAChB,EAGX,IAAI8C,EAAiBlL,EAAK4K,UAAUmB,EAAW,GAAI/B,GAEnD,GAAIkB,EAAiB,EAEjB,OADItJ,GAAOuG,QAAQC,IAAI,kDAAmDpI,EAAK4K,UAAUmB,EAAW,GAAI/B,KACjG,EAKX,GAFAI,EAAOR,EAAS5J,EAAM+L,EAAYA,EAAab,EAAgB9I,EAAU4H,GAErEI,EAAK4B,eAEL,IAAK9B,KADL2B,EAAWjC,EAAS5J,EAAM+L,EAAYA,EAAa3B,EAAK4B,eAAgB9J,EAAU8H,GACtE6B,EAAU,CAClB,OAAQ3B,GACJ,IAAK,cACL,IAAK,QACL,IAAK,eACL,IAAK,kBACL,IAAK,gBACL,IAAK,mBACL,IAAK,YACL,IAAK,iBACL,IAAK,eACL,IAAK,cACL,IAAK,WACL,IAAK,aACL,IAAK,YACL,IAAK,uBACL,IAAK,aACD2B,EAAS3B,GAAO1H,EAAa0H,GAAK2B,EAAS3B,IAC3C,MAEJ,IAAK,cACL,IAAK,kBACD2B,EAAS3B,GAAOyB,OAAOC,aAAaC,EAAS3B,GAAK,GAAI2B,EAAS3B,GAAK,GAAI2B,EAAS3B,GAAK,GAAI2B,EAAS3B,GAAK,IACxG,MAEJ,IAAK,0BACD2B,EAAS3B,GACL1H,EAAawC,WAAW6G,EAAS3B,GAAK,IACtC1H,EAAawC,WAAW6G,EAAS3B,GAAK,IACtC1H,EAAawC,WAAW6G,EAAS3B,GAAK,IACtC1H,EAAawC,WAAW6G,EAAS3B,GAAK,IAC1C,MAERE,EAAKF,GAAO2B,EAAS3B,GAI7B,GAAIE,EAAK6B,kBAEL,IAAK/B,KADL4B,EAAUlC,EAAS5J,EAAM+L,EAAYA,EAAa3B,EAAK6B,kBAAmB5J,EAAS2H,GACvE8B,EAAS,CACjB,OAAQ5B,GACJ,IAAK,eACD4B,EAAQ5B,GAAO4B,EAAQ5B,GAAK,GACxB,IAAM4B,EAAQ5B,GAAK,GACnB,IAAM4B,EAAQ5B,GAAK,GACnB,IAAM4B,EAAQ5B,GAAK,GACvB,MAERE,EAAKF,GAAO4B,EAAQ5B,GAO5B,OAFAE,EAAK,aAAea,EAAmBjL,EAAM+L,EAAYb,EAAgBlB,GAElEI,EAGZ,SAAS/C,EAAcrH,GAElB,GAAM,cAAegI,KAArB,CAIA,IAAIM,EAAW,IAAIC,SAASvI,GAG5B,GADI4B,GAAOuG,QAAQC,IAAI,sBAAwBpI,EAAKqI,YACvB,KAAxBC,EAASE,SAAS,IAAwC,KAAxBF,EAASE,SAAS,GAEtD,OADI5G,GAAOuG,QAAQC,IAAI,qBAChB,EAGV,IAAIM,EAAS,EACT/C,EAAS3F,EAAKqI,WACd6D,EAAM,IAAIC,UAEd,MAAOzD,EAAU/C,EAAO,EAAI,CACxB,GAA4C,QAAxC8D,EAAgBnB,EAAUI,EAAQ,GAAc,CAChD,IAAIK,EAAcL,EAAS,EACvBM,EAAgBV,EAASM,UAAUF,EAAS,GAAK,EACjD0D,EAAY3C,EAAgBnB,EAAUS,EAAaC,GACnDqD,EAAcD,EAAUE,QAAQ,YAAc,EAClDF,EAAYA,EAAUG,UAAWH,EAAUE,QAAS,cAAgBD,GAEpE,IAAIG,EAAaJ,EAAUE,QAAQ,aAAe,GAGlDF,EAAYA,EAAUpP,MAAM,EAAGwP,GAAnBJ,6nBAYEA,EAAUpP,MAAMwP,GAE9B,IAAIC,EAAcP,EAAIQ,gBAAiBN,EAAW,YAClD,OAAOO,EAAWF,GAErB/D,MAKT,SAASkE,EAASC,GACd,IAAIC,EAAO,GAEX,GAAoB,GAAhBD,EAAIE,UACN,GAAIF,EAAIG,WAAWrH,OAAS,EAAG,CAC7BmH,EAAK,eAAiB,GACtB,IAAK,IAAIG,EAAI,EAAGA,EAAIJ,EAAIG,WAAWrH,OAAQsH,IAAK,CAC9C,IAAIC,EAAYL,EAAIG,WAAWG,KAAKF,GACpCH,EAAK,eAAeI,EAAUE,UAAYF,EAAUG,iBAGnD,GAAoB,GAAhBR,EAAIE,SACb,OAAOF,EAAIQ,UAIb,GAAIR,EAAIS,gBACN,IAAI,IAAItH,EAAI,EAAGA,EAAI6G,EAAIU,WAAW5H,OAAQK,IAAK,CAC7C,IAAIwH,EAAQX,EAAIU,WAAWJ,KAAKnH,GAC5BoH,EAAWI,EAAMJ,SACrB,GAAsB,MAAlBN,EAAKM,GACPN,EAAKM,GAAYR,EAASY,OACrB,CACL,GAA2B,MAAvBV,EAAKM,GAAU5L,KAAc,CAC/B,IAAIiM,EAAMX,EAAKM,GACfN,EAAKM,GAAY,GACjBN,EAAKM,GAAU5L,KAAKiM,GAEtBX,EAAKM,GAAU5L,KAAKoL,EAASY,KAKnC,OAAOV,EAGX,SAASH,EAAWE,GAChB,IACI,IAAI/K,EAAM,GACV,GAAI+K,EAAIa,SAAS/H,OAAS,EACxB,IAAK,IAAIK,EAAI,EAAGA,EAAI6G,EAAIa,SAAS/H,OAAQK,IAAK,CAC5C,IAAImH,EAAON,EAAIa,SAASP,KAAKnH,GACzBgH,EAAaG,EAAKH,WACtB,IAAI,IAAIW,KAAOX,EAAY,CACvB,IAAIY,EAAUZ,EAAWW,GACrBE,EAAUD,EAAQR,SAClBU,EAAYF,EAAQP,eAETU,IAAZF,IACC/L,EAAI+L,GAAWC,GAGvB,IAAIV,EAAWD,EAAKC,SAEpB,GAA8B,oBAAlBtL,EAAIsL,GACdtL,EAAIsL,GAAYR,EAASO,OACpB,CACL,GAAmC,oBAAvBrL,EAAIsL,GAAc,KAAkB,CAC9C,IAAIK,EAAM3L,EAAIsL,GAEdtL,EAAIsL,GAAY,GAChBtL,EAAIsL,GAAU5L,KAAKiM,GAErB3L,EAAIsL,GAAU5L,KAAKoL,EAASO,UAIhCrL,EAAM+K,EAAImB,YAEZ,OAAOlM,EACP,MAAO5C,GACLiJ,QAAQC,IAAIlJ,EAAE+O,UAIxBpM,EAAKqM,UAAY,WACbrM,EAAKsF,cAAe,GAGxBtF,EAAKsM,WAAa,WACdtM,EAAKsF,cAAe,GAGxBtF,EAAKuM,QAAU,SAASlJ,EAAKlJ,GACzB,SAAMgM,KAAKqG,OAASnJ,aAAe8C,KAAKqG,OAChCrG,KAAKsG,kBAAoBpJ,aAAe8C,KAAKsG,oBAC7CpJ,EAAIqJ,YAGPtJ,EAAaC,GAGVlJ,GACAA,EAASsL,KAAKpC,GAHlB0B,EAAa1B,EAAKlJ,IAMf,IAGX6F,EAAK2M,OAAS,SAAStJ,EAAKgF,GACxB,GAAKjF,EAAaC,GAClB,OAAOA,EAAI8B,SAASkD,IAGxBrI,EAAK4M,WAAa,SAASvJ,EAAKgF,GAC5B,GAAKjF,EAAaC,GAClB,OAAOA,EAAI+B,SAASiD,IAGxBrI,EAAK6M,WAAa,SAASxJ,GACvB,IAAKD,EAAaC,GAAM,MAAO,GAC/B,IAAIyJ,EACAvR,EAAO8H,EAAI8B,SACXoD,EAAO,GACX,IAAKuE,KAAKvR,EACFA,EAAKsM,eAAeiF,KACpBvE,EAAKuE,GAAKvR,EAAKuR,IAGvB,OAAOvE,GAGXvI,EAAK+M,eAAiB,SAAS1J,GAC3B,IAAKD,EAAaC,GAAM,MAAO,GAC/B,IAAIyJ,EACAvR,EAAO8H,EAAI+B,SACXmD,EAAO,GACX,IAAKuE,KAAKvR,EACFA,EAAKsM,eAAeiF,KACpBvE,EAAKuE,GAAKvR,EAAKuR,IAGvB,OAAOvE,GAGXvI,EAAKgN,OAAS,SAAS3J,GACnB,IAAKD,EAAaC,GAAM,MAAO,GAC/B,IAAIyJ,EACAvR,EAAO8H,EAAI8B,SACX8H,EAAY,GAChB,IAAKH,KAAKvR,EACFA,EAAKsM,eAAeiF,KACE,iBAAXvR,EAAKuR,GACRvR,EAAKuR,aAAc7D,OACnBgE,GAAaH,EAAI,MAAQvR,EAAKuR,GAAK,KAAOvR,EAAKuR,GAAGnE,UAAY,IAAMpN,EAAKuR,GAAGlE,YAAc,QAE1FqE,GAAaH,EAAI,OAASvR,EAAKuR,GAAGhJ,OAAS,eAG/CmJ,GAAaH,EAAI,MAAQvR,EAAKuR,GAAK,QAI/C,OAAOG,GAGXjN,EAAKkN,mBAAqB,SAAS/O,GAC/B,OAAO+G,EAAe/G,IAItB,EAAkB,GAAI,EAAF,WAChB,OAAO6B,GACV,uCAEPyF,KAAKzN,O","file":"js/chunk-8000b9d8.7866808c.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&scope=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&scope=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"covid-page order-layout\"},[_c('header',{staticClass:\"page-header\"},[_c('div',{staticStyle:{\"display\":\"flex\",\"align-items\":\"center\"}},[_c('router-link',{staticClass:\"header-link\",attrs:{\"to\":\"/index\",\"tag\":\"span\"}},[_c('img',{staticClass:\"header-icon\",attrs:{\"src\":require(\"../../assets/icons/tabbar/home_active.png\")}})]),_vm._m(0),_c('img',{staticClass:\"header-logo1\",attrs:{\"src\":require(\"../../assets/image/demo_aietech_logo.png\")}})],1),_c('router-link',{staticClass:\"header-link\",attrs:{\"to\":\"/mine\",\"tag\":\"span\"}},[_c('img',{staticClass:\"header-icon\",attrs:{\"src\":require(\"../../assets/icons/tabbar/mine_active.png\")}})])],1),_c('div',{staticClass:\"order-title\"},[_vm._v(\"\\n      \"+_vm._s(_vm.$t('home.title'))+\"\\n    \")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.language != 'en'),expression:\"language != 'en'\"}],staticClass:\"order-tip\"},[_vm._v(\"\\n      THAILAND USE ONLY\\n    \")]),(_vm.step == 0)?_c('div',{staticClass:\"order-content\"},[_c('div',{staticClass:\"order-help\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('order.step_0_title'))+\"\\n      \")]),(_vm.uploadNeedLogin && !_vm.isLogin)?_c('van-button',{staticClass:\"order-button\",staticStyle:{\"margin-top\":\"30px\"},attrs:{\"size\":\"normal\"},on:{\"click\":_vm.handleLogin}},[_vm._v(_vm._s(_vm.$t('order.step_0_login')))]):_vm._e(),(_vm.max_test_enable && _vm.ip_enable && (!_vm.uploadNeedLogin || _vm.isLogin))?_c('van-uploader',{staticClass:\"order-uploader\",staticStyle:{\"margin-top\":\"30px\"},attrs:{\"after-read\":_vm.handleInput,\"accept\":\"image/*\",\"capture\":\"user\"}},[_c('van-button',{staticClass:\"order-button order-button-white\",attrs:{\"size\":\"normal\"}},[_vm._v(_vm._s(_vm.$t('order.step_0_camera')))])],1):_vm._e(),((!_vm.max_test_enable || !_vm.ip_enable) && (!_vm.uploadNeedLogin || _vm.isLogin))?_c('van-button',{staticClass:\"order-button order-button-white\",staticStyle:{\"margin-top\":\"30px\"},attrs:{\"size\":\"normal\"},on:{\"click\":_vm.handleCheck}},[_vm._v(_vm._s(_vm.$t('order.step_0_camera')))]):_vm._e(),(_vm.max_test_enable && _vm.ip_enable && (!_vm.uploadNeedLogin || _vm.isLogin))?_c('van-uploader',{staticClass:\"order-uploader\",attrs:{\"after-read\":_vm.handleInput,\"accept\":\"image/*\"}},[_c('van-button',{staticClass:\"order-button\",attrs:{\"size\":\"normal\"}},[_vm._v(_vm._s(_vm.$t('order.step_0_choose')))])],1):_vm._e(),((!_vm.max_test_enable || !_vm.ip_enable) && (!_vm.uploadNeedLogin || _vm.isLogin))?_c('van-button',{staticClass:\"order-button\",staticStyle:{\"margin-top\":\"30px\"},attrs:{\"size\":\"normal\"},on:{\"click\":_vm.handleCheck}},[_vm._v(_vm._s(_vm.$t('order.step_0_choose')))]):_vm._e(),_c('b',{staticStyle:{\"color\":\"#f5db12\",\"margin-top\":\"50px\",\"font-size\":\"0.5rem\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('order.new_caution_title'))+\"\\n      \")]),_c('div',[_c('p',{staticStyle:{\"color\":\"#f5db12\",\"margin-top\":\"0.4rem\",\"font-size\":\"0.5rem\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('order.new_caution_1'))+\"\\n      \")]),_c('p',{staticStyle:{\"color\":\"#f5db12\",\"margin-top\":\"0.8rem\",\"font-size\":\"0.5rem\"}},[_vm._v(\"\\n        1.) \"+_vm._s(_vm.$t('order.new_caution_2'))+\"\\n      \")]),_c('p',{staticStyle:{\"color\":\"#f5db12\",\"margin-top\":\"10px\",\"font-size\":\"0.5rem\"}},[_vm._v(\"\\n        2.) \"+_vm._s(_vm.$t('order.new_caution_3'))+\"\\n      \")]),_c('p',{staticStyle:{\"color\":\"#f5db12\",\"margin-top\":\"10px\",\"font-size\":\"0.5rem\"}},[_vm._v(\"\\n        3.) \"+_vm._s(_vm.$t('order.new_caution_4'))+\"\\n      \")]),_c('p',{staticStyle:{\"color\":\"#f5db12\",\"margin-top\":\"10px\",\"font-size\":\"0.5rem\"}},[_vm._v(\"\\n        4.) \"+_vm._s(_vm.$t('order.new_caution_5'))+\"\\n      \")]),_c('p',{staticStyle:{\"color\":\"#f5db12\",\"margin-top\":\"10px\",\"font-size\":\"0.5rem\"}},[_vm._v(\"\\n        5.) \"+_vm._s(_vm.$t('order.new_caution_6'))+\"\\n      \")])])],1):_vm._e(),(_vm.step == 1)?_c('div',{staticClass:\"order-content\"},[_c('div',{staticClass:\"order-reset\"},[_c('van-uploader',{staticClass:\"order-uploader\",attrs:{\"after-read\":_vm.handleInput,\"accept\":\"image/*\",\"capture\":\"user\"}},[_c('van-button',{staticClass:\"order-button\",attrs:{\"size\":\"normal\"}},[_vm._v(_vm._s(_vm.$t('order.step_1_camera')))])],1),_c('van-uploader',{staticClass:\"order-uploader\",attrs:{\"after-read\":_vm.handleInput,\"accept\":\"image/*\"}},[_c('van-button',{staticClass:\"order-button\",attrs:{\"size\":\"normal\"}},[_vm._v(_vm._s(_vm.$t('order.step_1_choose')))])],1)],1),_c('div',{staticClass:\"order-clip\",attrs:{\"id\":\"clipArea\"}}),_c('van-button',{staticClass:\"order-button order-button-white\",attrs:{\"size\":\"normal\"},on:{\"click\":_vm.handleNext}},[_vm._v(_vm._s(_vm.$t('order.step_1_next')))]),_c('div',{staticClass:\"order-example-text\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('order.step_1_tip_0'))),_c('br'),_vm._v(\"\\n        \"+_vm._s(_vm.$t('order.step_1_tip_1'))+\"\\n      \")]),_c('img',{staticClass:\"order-example\",attrs:{\"src\":require(\"../../assets/image/eye.jpg\")}})],1):_vm._e(),(_vm.step == 2)?_c('div',{staticClass:\"order-content\"},[_c('div',{staticClass:\"order-help\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('order.step_2_title'))+\"\\n      \")]),_c('img',{staticClass:\"order-preview-image\",attrs:{\"src\":_vm.uploadImage}}),_c('div',{staticClass:\"order-prview-text\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('order.step_2_tip_1'))+\"\\n        \"),_c('br'),_c('br'),_vm._v(\"\\n        \"+_vm._s(_vm.$t('order.step_2_tip_2'))+\"\\n      \")]),_c('img',{staticClass:\"order-example\",attrs:{\"src\":require(\"../../assets/image/eye.jpg\")}}),_c('div',{staticClass:\"order-preview-buttons\"},[_c('van-button',{staticClass:\"order-button order-button-white\",attrs:{\"size\":\"normal\",\"icon\":\"success\"},on:{\"click\":_vm.handleUpload}},[_vm._v(_vm._s(_vm.$t('order.step_2_test')))]),_c('van-button',{staticClass:\"order-button\",attrs:{\"size\":\"normal\",\"icon\":\"cross\"},on:{\"click\":_vm.handleBack}},[_vm._v(_vm._s(_vm.$t('order.step_2_back')))])],1)]):_vm._e(),(_vm.step == 3)?_c('div',{staticClass:\"order-content\"},[_c('div',{staticClass:\"order-help\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('order.step_3_title'))+\"\\n      \")]),_c('van-circle',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"rate\":99,\"speed\":20,\"text\":_vm.text,\"stroke-width\":80,\"layer-color\":\"#eeeeee\",\"color\":_vm.gradientColor,\"size\":\"150\"},model:{value:(_vm.currentCircle),callback:function ($$v) {_vm.currentCircle=$$v},expression:\"currentCircle\"}})],1):_vm._e(),(_vm.step == 4)?_c('div',{staticClass:\"order-content\"},[_c('div',{staticClass:\"order-help\",staticStyle:{\"margin-top\":\"40px\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('order.step_4_title'))+\"\\n      \")]),_c('van-button',{staticClass:\"order-button\",staticStyle:{\"margin-top\":\"20px\"},attrs:{\"size\":\"normal\"},on:{\"click\":_vm.handleBack}},[_vm._v(_vm._s(_vm.$t('order.step_5_rePredict')))])],1):_vm._e(),(_vm.step == 5)?_c('div',{staticClass:\"order-content\"},[_c('div',{staticClass:\"order-result\"},[(!_vm.isNormalUser)?_c('div',{staticClass:\"result-item\"},[_c('span',{staticClass:\"result-label\"},[_vm._v(_vm._s(_vm.result_healthy.label))]),_c('van-circle',{attrs:{\"rate\":_vm.result_healthy.prob,\"text\":_vm.result_healthy.prob + '%',\"speed\":40,\"stroke-linecap\":\"square\",\"stroke-width\":100,\"layer-color\":\"#eeeeee\",\"color\":_vm.gradientColorHealthy,\"size\":\"100\"},model:{value:(_vm.result_healthy.prob),callback:function ($$v) {_vm.$set(_vm.result_healthy, \"prob\", $$v)},expression:\"result_healthy.prob\"}})],1):_vm._e(),_c('div',{staticClass:\"result-item\"},[_c('span',{staticClass:\"result-title\"},[_vm._v(\"COVID-19\")]),(_vm.cv19_low_risk)?_c('span',{staticClass:\"result-label\"},[_vm._v(_vm._s(_vm.$t('order.step_5_low')))]):_vm._e(),(!_vm.cv19_low_risk)?_c('span',{staticClass:\"result-label result-label-high\"},[_vm._v(_vm._s(_vm.$t('order.step_5_high')))]):_vm._e(),_c('van-circle',{attrs:{\"rate\":_vm.result_cv19.prob,\"text\":_vm.result_cv19.prob + '%',\"speed\":40,\"stroke-linecap\":\"square\",\"stroke-width\":100,\"layer-color\":\"#eeeeee\",\"color\":_vm.gradientColorCV19,\"size\":\"150\"},model:{value:(_vm.result_cv19.prob),callback:function ($$v) {_vm.$set(_vm.result_cv19, \"prob\", $$v)},expression:\"result_cv19.prob\"}}),(!_vm.cv19_low_risk)?_c('div',{staticClass:\"dialog-content\"},[_c('span',{staticStyle:{\"color\":\"red\",\"font-weight\":\"bold\"}},[_vm._v(_vm._s(_vm.$t('order.high_risk_tip_0')))]),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(_vm._s(_vm.$t('order.high_risk_tip_1')))])]):_vm._e(),_c('span',{staticStyle:{\"margin-top\":\"0.1rem\",\"font-size\":\"0.3rem\",\"font-weight\":\"bold\"}},[_vm._v(_vm._s(this.order_timestamp))])],1),(!_vm.isNormalUser)?_c('div',{staticClass:\"result-item\"},[_c('span',{staticClass:\"result-label\"},[_vm._v(_vm._s(_vm.result_pulmonary.label))]),_c('van-circle',{attrs:{\"rate\":_vm.result_pulmonary.prob,\"text\":_vm.result_pulmonary.prob + '%',\"speed\":40,\"stroke-linecap\":\"square\",\"stroke-width\":100,\"layer-color\":\"#eeeeee\",\"color\":_vm.gradientColorCV19,\"size\":\"100\"},model:{value:(_vm.result_pulmonary.prob),callback:function ($$v) {_vm.$set(_vm.result_pulmonary, \"prob\", $$v)},expression:\"result_pulmonary.prob\"}})],1):_vm._e(),(!_vm.isNormalUser)?_c('div',{staticClass:\"result-item\"},[_c('span',{staticClass:\"result-label\"},[_vm._v(_vm._s(_vm.result_ocular.label))]),_c('van-circle',{attrs:{\"rate\":_vm.result_ocular.prob,\"text\":_vm.result_ocular.prob + '%',\"speed\":40,\"stroke-linecap\":\"square\",\"stroke-width\":100,\"layer-color\":\"#eeeeee\",\"color\":_vm.gradientColorCV19,\"size\":\"100\"},model:{value:(_vm.result_ocular.prob),callback:function ($$v) {_vm.$set(_vm.result_ocular, \"prob\", $$v)},expression:\"result_ocular.prob\"}})],1):_vm._e()]),_c('van-button',{staticClass:\"order-button\",attrs:{\"size\":\"normal\"},on:{\"click\":_vm.handleBack}},[_vm._v(_vm._s(_vm.$t('order.step_5_rePredict')))]),_c('div',{staticClass:\"display-id\"},[_c('p',{staticStyle:{\"margin-right\":\"0.2rem\",\"color\":\"white\",\"font-size\":\"0.4rem\",\"font-weight\":\"bold\"}},[_vm._v(\"\\n          RN: \"+_vm._s(this.order_id.slice(-6))+\"\\n        \")])])],1):_vm._e(),_c('van-dialog',{attrs:{\"showCancelButton\":false,\"showConfirmButton\":false},model:{value:(_vm.showIpDisable),callback:function ($$v) {_vm.showIpDisable=$$v},expression:\"showIpDisable\"}},[_c('div',{staticClass:\"dialog-content\"},[_vm._v(_vm._s(_vm.$t('home.check_ip_enable')))])]),_c('van-dialog',{attrs:{\"showCancelButton\":false,\"showConfirmButton\":false},model:{value:(_vm.showMaxTestDisable),callback:function ($$v) {_vm.showMaxTestDisable=$$v},expression:\"showMaxTestDisable\"}},[_c('div',{staticClass:\"dialog-content\"},[_vm._v(_vm._s(_vm.$t('home.check_max_test')))])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"header-link\",staticStyle:{\"margin-left\":\"0.3rem\"},attrs:{\"href\":\"http://aimomics.org/\"}},[_c('img',{staticClass:\"header-logo\",attrs:{\"src\":require(\"../../assets/image/logo.png\")}})])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"covid-page order-layout\">\r\n    <header class=\"page-header\">\r\n      <div style=\"display: flex; align-items: center\">\r\n        <router-link class=\"header-link\" to=\"/index\" tag=\"span\">\r\n          <img src=\"../../assets/icons/tabbar/home_active.png\" class=\"header-icon\"/>\r\n        </router-link>\r\n        <a class=\"header-link\" style=\"margin-left: 0.3rem\" href=\"http://aimomics.org/\">\r\n          <img src=\"../../assets/image/logo.png\" class=\"header-logo\"/>\r\n        </a>\r\n        <img src=\"../../assets/image/demo_aietech_logo.png\" class=\"header-logo1\"/>\r\n      </div>\r\n      <router-link class=\"header-link\" to=\"/mine\" tag=\"span\">\r\n        <img src=\"../../assets/icons/tabbar/mine_active.png\" class=\"header-icon\"/>\r\n      </router-link>\r\n    </header>\r\n    <div class=\"order-title\">\r\n      {{$t('home.title')}}\r\n    </div>\r\n    <div class=\"order-tip\" v-show=\"language != 'en'\">\r\n      THAILAND USE ONLY\r\n    </div>\r\n    <div class=\"order-content\" v-if=\"step == 0\">\r\n      <div class=\"order-help\">\r\n        {{$t('order.step_0_title')}}\r\n      </div>\r\n      <van-button size=\"normal\" style=\"margin-top:30px;\" class=\"order-button\" v-if=\"uploadNeedLogin && !isLogin\" @click=\"handleLogin\">{{$t('order.step_0_login')}}</van-button>\r\n      <van-uploader :after-read=\"handleInput\" accept=\"image/*\" capture=\"user\" class=\"order-uploader\" style=\"margin-top:30px;\" v-if=\"max_test_enable && ip_enable && (!uploadNeedLogin || isLogin)\">\r\n        <van-button size=\"normal\" class=\"order-button order-button-white\">{{$t('order.step_0_camera')}}</van-button>\r\n      </van-uploader>\r\n      <van-button size=\"normal\" class=\"order-button order-button-white\" style=\"margin-top:30px;\" @click=\"handleCheck\" v-if=\"(!max_test_enable || !ip_enable) && (!uploadNeedLogin || isLogin)\">{{$t('order.step_0_camera')}}</van-button>\r\n      <van-uploader :after-read=\"handleInput\" accept=\"image/*\" class=\"order-uploader\" v-if=\"max_test_enable && ip_enable && (!uploadNeedLogin || isLogin)\">\r\n        <van-button size=\"normal\" class=\"order-button\">{{$t('order.step_0_choose')}}</van-button>\r\n      </van-uploader>\r\n      <van-button size=\"normal\" class=\"order-button\" style=\"margin-top:30px;\" @click=\"handleCheck\" v-if=\"(!max_test_enable || !ip_enable) && (!uploadNeedLogin || isLogin)\">{{$t('order.step_0_choose')}}</van-button>\r\n      <b style=\"color: #f5db12; margin-top: 50px; font-size: 0.5rem\">\r\n        {{ $t('order.new_caution_title') }}\r\n      </b>\r\n      <div>\r\n      <p style=\"color: #f5db12; margin-top: 0.4rem; font-size: 0.5rem;\" >\r\n        {{ $t('order.new_caution_1') }}\r\n      </p>\r\n      <p style=\"color: #f5db12; margin-top: 0.8rem; font-size: 0.5rem\" >\r\n        1.) {{ $t('order.new_caution_2') }}\r\n      </p>\r\n      <p style=\"color: #f5db12; margin-top: 10px; font-size: 0.5rem\" >\r\n        2.) {{ $t('order.new_caution_3') }}\r\n      </p>\r\n      <p style=\"color: #f5db12; margin-top: 10px; font-size: 0.5rem\" >\r\n        3.) {{ $t('order.new_caution_4') }}\r\n      </p>\r\n      <p style=\"color: #f5db12; margin-top: 10px; font-size: 0.5rem\" >\r\n        4.) {{ $t('order.new_caution_5') }}\r\n      </p>\r\n      <p style=\"color: #f5db12; margin-top: 10px; font-size: 0.5rem\" >\r\n        5.) {{ $t('order.new_caution_6') }}\r\n      </p>\r\n      </div>\r\n<!--      <div class=\"order-tip-text\" style=\"margin-top: 30px;\">-->\r\n<!--        {{$t('home.alert')}}<br/>-->\r\n<!--        {{$t('order.tip_0')}}<br/><br/>-->\r\n<!--        {{$t('multi.tip_1')}}<br/><br/>-->\r\n<!--        {{$t('multi.tip_2')}}<br/><br/>-->\r\n<!--        {{$t('multi.tip_3')}}<br/><br/>-->\r\n<!--        {{$t('multi.tip_4')}}<br/>-->\r\n<!--      </div>-->\r\n    </div>\r\n    <div class=\"order-content\" v-if=\"step == 1\">\r\n      <div class=\"order-reset\">\r\n        <van-uploader :after-read=\"handleInput\" accept=\"image/*\" capture=\"user\" class=\"order-uploader\">\r\n          <van-button size=\"normal\" class=\"order-button\">{{$t('order.step_1_camera')}}</van-button>\r\n        </van-uploader>\r\n        <van-uploader :after-read=\"handleInput\" accept=\"image/*\" class=\"order-uploader\">\r\n          <van-button size=\"normal\" class=\"order-button\">{{$t('order.step_1_choose')}}</van-button>\r\n        </van-uploader>\r\n      </div>\r\n      <div class=\"order-clip\" id=\"clipArea\"></div>\r\n      <van-button size=\"normal\" class=\"order-button order-button-white\" @click=\"handleNext\">{{$t('order.step_1_next')}}</van-button>\r\n      <div class=\"order-example-text\">\r\n        {{$t('order.step_1_tip_0')}}<br/>\r\n        {{$t('order.step_1_tip_1')}}\r\n      </div>\r\n      <img src=\"../../assets/image/eye.jpg\" class=\"order-example\"/>\r\n    </div>\r\n    <div class=\"order-content\" v-if=\"step == 2\">\r\n      <div class=\"order-help\">\r\n        {{$t('order.step_2_title')}}\r\n      </div>\r\n      <img :src=\"uploadImage\" class=\"order-preview-image\"/>\r\n      <div class=\"order-prview-text\">\r\n        {{$t('order.step_2_tip_1')}}\r\n        <br/><br/>\r\n        {{$t('order.step_2_tip_2')}}\r\n      </div>\r\n      <img src=\"../../assets/image/eye.jpg\" class=\"order-example\"/>\r\n      <div class=\"order-preview-buttons\">\r\n        <van-button size=\"normal\" icon=\"success\" class=\"order-button order-button-white\" @click=\"handleUpload\">{{$t('order.step_2_test')}}</van-button>\r\n        <van-button size=\"normal\" icon=\"cross\" class=\"order-button\" @click=\"handleBack\">{{$t('order.step_2_back')}}</van-button>\r\n      </div>\r\n    </div>\r\n    <div class=\"order-content\" v-if=\"step == 3\">\r\n      <div class=\"order-help\">\r\n        {{$t('order.step_3_title')}}\r\n      </div>\r\n      <van-circle v-model=\"currentCircle\" :rate=\"99\" :speed=\"20\" :text=\"text\" :stroke-width=\"80\" layer-color=\"#eeeeee\" :color=\"gradientColor\" size=\"150\" style=\"margin-top:20px;\"/>\r\n    </div>\r\n    <div class=\"order-content\" v-if=\"step == 4\">\r\n      <div class=\"order-help\" style=\"margin-top:40px;\">\r\n        {{$t('order.step_4_title')}}\r\n      </div>\r\n      <van-button size=\"normal\" class=\"order-button\" style=\"margin-top:20px;\" @click=\"handleBack\">{{$t('order.step_5_rePredict')}}</van-button>\r\n    </div>\r\n<!--    <div class=\"order-content\" v-if=\"step == 5 && extra_order_tip != null\">-->\r\n<!--      <van-form @submit=\"handleSubmitExtra\">-->\r\n<!--        <van-cell-group v-for=\"(item, index) in extra_order_tip\" :key=\"item.title\" >-->\r\n<!--          <van-field-->\r\n<!--            v-if=\"item.type === 0\"-->\r\n<!--            v-model=\"extra_order_tip_form[index]\"-->\r\n<!--            :label=\"language === 'zh' ? item.title : language === 'hk' ? item.title_hk : item.title_en\"-->\r\n<!--            type=\"text\"-->\r\n<!--            clearable-->\r\n<!--            :rules=\"[{ required: true, message: $t('order.not_empty')}]\"-->\r\n<!--          />-->\r\n<!--          <van-field-->\r\n<!--            readonly-->\r\n<!--            clickable-->\r\n<!--            v-if=\"item.type === 1\"-->\r\n<!--            v-model=\"extra_order_tip_form[index]\"-->\r\n<!--            :label=\"language === 'zh' ? item.title : language === 'hk' ? item.title_hk : item.title_en\"-->\r\n<!--            :rules=\"[{ required: true, message: $t('order.not_empty')}]\"-->\r\n<!--            @click=\"orderTipOnOpen($event, index)\"-->\r\n<!--          />-->\r\n<!--        </van-cell-group>-->\r\n<!--        <van-popup v-model=\"extra_order_tip_show\" round position=\"bottom\">-->\r\n<!--            <van-picker-->\r\n<!--              show-toolbar-->\r\n<!--              :columns=\"extra_order_tip_columns\"-->\r\n<!--              @confirm=\"orderTipOnConfirm($event)\"-->\r\n<!--              @cancel=\"extra_order_tip_show = false\"-->\r\n<!--            />-->\r\n<!--          </van-popup>-->\r\n<!--        <div class=\"covid-btns\">-->\r\n<!--          <van-button-->\r\n<!--            type=\"info\"-->\r\n<!--            class=\"covid-btn\"-->\r\n<!--            :loading=\"handleSubmitExtraLoading\"-->\r\n<!--            :loading-text=\"$t('password.saving')\"-->\r\n<!--          >-->\r\n<!--            {{$t('password.save')}}-->\r\n<!--          </van-button>-->\r\n<!--        </div>-->\r\n<!--      </van-form>-->\r\n<!--    </div>-->\r\n    <div class=\"order-content\" v-if=\"step == 5\">\r\n      <div class=\"order-result\">\r\n        <div class=\"result-item\" v-if=\"!isNormalUser\">\r\n          <span class=\"result-label\">{{result_healthy.label}}</span>\r\n          <van-circle v-model=\"result_healthy.prob\" :rate=\"result_healthy.prob\" :text=\"result_healthy.prob + '%'\" :speed=\"40\" stroke-linecap=\"square\" :stroke-width=\"100\" layer-color=\"#eeeeee\" :color=\"gradientColorHealthy\" size=\"100\"/>\r\n        </div>\r\n        <div class=\"result-item\">\r\n          <span class=\"result-title\">COVID-19</span>\r\n          <span class=\"result-label\" v-if=\"cv19_low_risk\">{{$t('order.step_5_low')}}</span>\r\n          <span class=\"result-label result-label-high\" v-if=\"!cv19_low_risk\">{{$t('order.step_5_high')}}</span>\r\n          <van-circle v-model=\"result_cv19.prob\" :rate=\"result_cv19.prob\" :text=\"result_cv19.prob + '%'\" :speed=\"40\" stroke-linecap=\"square\" :stroke-width=\"100\" layer-color=\"#eeeeee\" :color=\"gradientColorCV19\" size=\"150\"/>\r\n          <div class=\"dialog-content\" v-if=\"!cv19_low_risk\">\r\n            <span style=\"color: red; font-weight: bold;\">{{$t('order.high_risk_tip_0')}}</span>\r\n            <span style=\"color: red;\">{{$t('order.high_risk_tip_1')}}</span>\r\n          </div>\r\n          <span style=\"margin-top: 0.1rem; font-size: 0.3rem; font-weight: bold\">{{ this.order_timestamp }}</span>\r\n        </div>\r\n        <div class=\"result-item\" v-if=\"!isNormalUser\">\r\n          <span class=\"result-label\">{{result_pulmonary.label}}</span>\r\n          <van-circle v-model=\"result_pulmonary.prob\" :rate=\"result_pulmonary.prob\" :text=\"result_pulmonary.prob + '%'\" :speed=\"40\" stroke-linecap=\"square\" :stroke-width=\"100\" layer-color=\"#eeeeee\" :color=\"gradientColorCV19\" size=\"100\"/>\r\n        </div>\r\n        <div class=\"result-item\" v-if=\"!isNormalUser\">\r\n          <span class=\"result-label\">{{result_ocular.label}}</span>\r\n          <van-circle v-model=\"result_ocular.prob\" :rate=\"result_ocular.prob\" :text=\"result_ocular.prob + '%'\" :speed=\"40\" stroke-linecap=\"square\" :stroke-width=\"100\" layer-color=\"#eeeeee\" :color=\"gradientColorCV19\" size=\"100\"/>\r\n        </div>\r\n      </div>\r\n      <van-button size=\"normal\" class=\"order-button\" @click=\"handleBack\">{{$t('order.step_5_rePredict')}}</van-button>\r\n      <div class=\"display-id\">\r\n        <p style=\"margin-right: 0.2rem; color: white; font-size: 0.4rem; font-weight: bold;\">\r\n          RN: {{ this.order_id.slice(-6) }}\r\n        </p>\r\n      </div>\r\n\r\n<!--      <div class=\"order-result-tip\" v-if=\"!cv19_low_risk\">{{$t('order.step_6_tip')}}</div>-->\r\n<!--      <a class=\"order-result-tip-a\" v-if=\"!cv19_low_risk\" href=\"mailto: service@aimomics.org\">service@aimomics.org</a>-->\r\n\r\n    </div>\r\n    <van-dialog v-model=\"showIpDisable\" :showCancelButton=\"false\" :showConfirmButton=\"false\">\r\n      <div class=\"dialog-content\">{{$t('home.check_ip_enable')}}</div>\r\n    </van-dialog>\r\n    <van-dialog v-model=\"showMaxTestDisable\" :showCancelButton=\"false\" :showConfirmButton=\"false\">\r\n      <div class=\"dialog-content\">{{$t('home.check_max_test')}}</div>\r\n    </van-dialog>\r\n<!--    <van-dialog v-model=\"showHighRisk\" className=\"high-risk-dialog\" :showCancelButton=\"false\" :showConfirmButton=\"true\" :confirmButtonText=\"$t('order.high_risk_tip_confirm')\">-->\r\n<!--      <div class=\"dialog-content\">-->\r\n<!--        <span style=\"color: red; font-weight: bold;\">{{$t('order.high_risk_tip_0')}}</span>-->\r\n<!--        {{$t('order.high_risk_tip_1')}}-->\r\n<!--      </div>-->\r\n<!--    </van-dialog>-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { checkLogin, isNormalUser, dataURLtoFile } from '../../utils/util'\r\nimport { getLanguage } from '../../i18n/index'\r\nimport * as imageConversion from 'image-conversion'\r\nimport { format } from 'date-fns'\r\nimport { enUS as dateLocaleEn, th as dateLocaleTh } from 'date-fns/locale'\r\nimport PhotoClip from 'photoclip'\r\nimport EXIF from 'exif-js'\r\nimport { utcToZonedTime, zonedTimeToUtc } from 'date-fns-tz'\r\nexport default {\r\n  name: 'home',\r\n  data () {\r\n    return {\r\n      submitLoading: false,\r\n      submitSuccess: false,\r\n      uploadNeedLogin: false,\r\n      isLogin: checkLogin(),\r\n      language: getLanguage(),\r\n      isNormalUser: isNormalUser(),\r\n      step: 0,\r\n      uploadImage: null,\r\n      currentCircle: 0,\r\n      circleInterval: null,\r\n      photo_clip: null,\r\n      gradientColor: {\r\n        '0%': '#3fecff',\r\n        '100%': '#6149f6'\r\n      },\r\n      gradientColorHealthy: {\r\n        '0%': '#07c160',\r\n        '50%': '#ff976a',\r\n        '100%': '#ee0a24'\r\n      },\r\n      gradientColorCV19: {\r\n        '0%': '#07c160',\r\n        '50%': '#ff976a',\r\n        '100%': '#ee0a24'\r\n      },\r\n      maxImageSize: 4 * 1024 * 1024,\r\n      result_healthy: { 'label': 'Healthy', 'prob': '0' },\r\n      result_cv19: { 'label': 'CV19', 'prob': '0' },\r\n      result_pulmonary: { 'label': 'Pulmonary', 'prob': '0' },\r\n      result_ocular: { 'label': 'Ocular', 'prob': '0' },\r\n      ip_enable: true,\r\n      max_test_enable: true,\r\n      showIpDisable: false,\r\n      showMaxTestDisable: false,\r\n      showHighRisk: false,\r\n      extra_order_tip: null,\r\n      extra_order_tip_form: [],\r\n      extra_order_tip_show: false,\r\n      extra_order_tip_columns: [],\r\n      handleSubmitExtraLoading: false,\r\n      needSubmitForm: false,\r\n      order_id: null,\r\n      cur_select_index: 0,\r\n      order_timestamp: null\r\n    }\r\n  },\r\n  computed: {\r\n    text () {\r\n      return this.currentCircle.toFixed(0) + '%'\r\n    },\r\n    cv19_low_risk () {\r\n      if (parseFloat(this.result_cv19.prob) >= 50) {\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.checkNeedLogin()\r\n    this.checkIpEnable()\r\n    this.checkMaxTest()\r\n  },\r\n  methods: {\r\n    checkNeedLogin () {\r\n      this.$http\r\n        .get(`/api/property/all`)\r\n        .then(response => {\r\n          if (response.data.code == 0) {\r\n            response.data.data.forEach(item => {\r\n              if (item.property == 'UPLOAD_NEED_LOGIN') {\r\n                this.uploadNeedLogin = item.is_active\r\n              } else if (item.property == 'ORDER_TIP') {\r\n                if (item.extra !== '' && item.extra != null) {\r\n                  const temp = JSON.parse(item.extra)\r\n                  temp.forEach((item, index) => {\r\n                    item.options = item.options != null ? item.options.split(';') : []\r\n                    item.options_hk = item.options_hk != null ? item.options_hk.split(';') : []\r\n                    item.options_en = item.options_en != null ? item.options_en.split(';') : []\r\n                    this.extra_order_tip_form[index] = null\r\n                  })\r\n                  this.extra_order_tip = temp\r\n                }\r\n                if (item.is_active) {\r\n                  this.needSubmitForm = true\r\n                } else {\r\n                  this.needSubmitForm = false\r\n                }\r\n              }\r\n            })\r\n          }\r\n        })\r\n    },\r\n    orderTipOnOpen (_, index) {\r\n      this.extra_order_tip_columns = this.language === 'zh' ? this.extra_order_tip[index].options : this.language === 'hk' ? this.extra_order_tip[index].options_hk : this.extra_order_tip[index].options_en\r\n      this.cur_select_index = index\r\n      this.extra_order_tip_show = true\r\n    },\r\n    orderTipOnConfirm (val) {\r\n      this.extra_order_tip_form[this.cur_select_index] = val\r\n      this.extra_order_tip_columns = []\r\n      this.extra_order_tip_show = false\r\n    },\r\n    // 检测ip为境内\r\n    checkIpEnable () {\r\n      this.$http\r\n        .get(`/api/order/check_ip_enable`)\r\n        .then(res => {\r\n          if (res.data.code == 0) {\r\n            this.ip_enable = res.data.data.enable\r\n          }\r\n        })\r\n    },\r\n    // 检测测试过多\r\n    checkMaxTest () {\r\n      this.$http\r\n        .get(`/api/order/check_max_test`)\r\n        .then(res => {\r\n          if (res.data.code == 0) {\r\n            this.max_test_enable = res.data.data.enable\r\n          }\r\n        })\r\n    },\r\n    handleCheck (e) {\r\n      e.preventDefault()\r\n      if (!this.ip_enable) {\r\n        this.showIpDisable = true\r\n      } else if (!this.max_test_enable) {\r\n        this.showMaxTestDisable = true\r\n      }\r\n    },\r\n    handleInput (file) {\r\n      this.step = 1\r\n      setTimeout(() => {\r\n        if (this.photo_clip != null) {\r\n          this.photo_clip.destroy()\r\n        }\r\n        let that = this\r\n        EXIF.getData(file.file, function () {\r\n          EXIF.getAllTags(this)\r\n          let orient = EXIF.getTag(this, 'Orientation')\r\n          that.photo_clip = new PhotoClip('#clipArea', {\r\n            size: [285, 75],\r\n            outputSize: [950, 250],\r\n            maxZoom: 2,\r\n            rotateFree: true,\r\n            outputQuality: 0.96,\r\n            lrzOption: {\r\n              width: 3000,\r\n              height: 2000,\r\n              quality: 1\r\n            }\r\n          })\r\n          that.photo_clip.load(file.file)\r\n          if (orient === 6) {\r\n            setTimeout(() => {\r\n              that.photo_clip.rotate(-90, 0)\r\n            }, 1000)\r\n          }\r\n        })\r\n      })\r\n    },\r\n    handleNext () {\r\n      this.step = 2\r\n      this.uploadImage = this.photo_clip.clip()\r\n      this.photo_clip.destroy()\r\n      this.photo_clip = null\r\n    },\r\n    handleBack () {\r\n      this.step = 0\r\n      this.photo_clip.destroy()\r\n      this.photo_clip = null\r\n      this.checkMaxTest()\r\n      this.checkIpEnable()\r\n    },\r\n    handleUpload () {\r\n      if (this.submitLoading) {\r\n        return\r\n      }\r\n      this.submitLoading = true\r\n      this.submitSuccess = false\r\n      this.currentCircle = 0\r\n      this.step = 3\r\n      let file = dataURLtoFile(this.uploadImage, 'covid.jpg')\r\n      this.circleInterval = setInterval(() => {\r\n        if (this.currentCircle < 99) {\r\n          this.currentCircle++\r\n        } else if (this.currentCircle >= 99 && this.submitSuccess) {\r\n          this.currentCircle = 100\r\n          if (this.needSubmitForm) {\r\n            this.step = 5\r\n          } else {\r\n            this.step = 6\r\n          }\r\n          clearInterval(this.circleInterval)\r\n        }\r\n      }, 50)\r\n\r\n      let formData = new FormData() // 构造一个 FormData，把后台需要发送的参数添加\r\n      formData.append('type', '1')\r\n      if (localStorage.getItem('uuid') != null) {\r\n        formData.append('uuid', localStorage.getItem('uuid'))\r\n      }\r\n      if (localStorage.getItem('region') != null) {\r\n        formData.append('region', localStorage.getItem('region'))\r\n      }\r\n      if (file.size > this.maxImageSize) {\r\n        imageConversion.compressAccurately(file, this.maxImageSize / 1024).then(res => {\r\n          // The res in the promise is a compressed Blob type (which can be treated as a File type) file;\r\n          formData.append('img0', res) // 接口需要传的参数\r\n          this.upload(formData)\r\n        })\r\n      } else {\r\n        formData.append('img0', file) // 接口需要传的参数\r\n        this.upload(formData)\r\n      }\r\n    },\r\n    upload (formdata) {\r\n      this.$http\r\n        .post(`/api/order/check`, formdata, { timeout: 120000 })\r\n        .then(response => {\r\n          if (response.data.code == 0) {\r\n            this.submitSuccess = true\r\n            let ret = response.data.data\r\n            this.result_healthy.prob = Number(ret.healthy)\r\n            this.result_cv19.prob = Number(ret.cv19)\r\n            this.result_pulmonary.prob = Number(ret.pulmonary)\r\n            this.result_ocular.prob = Number(ret.ocular)\r\n            this.order_id = ret.id\r\n            const dateFormatLocale = this.language === 'th' ? dateLocaleTh : dateLocaleEn\r\n            const parsedTime = zonedTimeToUtc(ret.create_date, 'Asia/Shanghai')\r\n            const thaiLocalTime = utcToZonedTime(parsedTime, 'Asia/Bangkok')\r\n            this.order_timestamp = format(thaiLocalTime, 'dd MMMM yyyy HH:mm:ss', { locale: dateFormatLocale })\r\n            if (ret.uuid != null) {\r\n              localStorage.setItem('uuid', ret.uuid)\r\n            }\r\n            if (!this.needSubmitForm && parseFloat(this.result_cv19.prob) >= 50) {\r\n              this.showHighRisk = true\r\n            }\r\n            this.$http.post(`/api/record/send`, { event: 'single_test', message: '快速检测成功', user_name: localStorage.getItem('uuid') || null })\r\n            this.submitLoading = false\r\n          } else {\r\n            this.$http.post(`/api/record/send`, { event: 'single_test', message: '快速检测失败', user_name: localStorage.getItem('uuid') || null })\r\n            clearInterval(this.circleInterval)\r\n            this.currentCircle = 0\r\n            this.submitLoading = false\r\n            this.step = 3\r\n          }\r\n        }).catch(error => {\r\n          clearInterval(this.circleInterval)\r\n          this.currentCircle = 0\r\n          this.submitLoading = false\r\n          this.step = 3\r\n        })\r\n    },\r\n    handleSubmitExtra () {\r\n      if (this.handleSubmitExtraLoading) {\r\n        return\r\n      }\r\n      const formdata = {\r\n        order_id: this.order_id,\r\n        extra: ''\r\n      }\r\n      if (this.isLogin) {\r\n        formdata.user_id = localStorage.getItem('user').uid\r\n      } else {\r\n        formdata.uuid = localStorage.getItem('uuid')\r\n      }\r\n      formdata.extra = JSON.stringify(this.extra_order_tip.map((item, index) => {\r\n        return {\r\n          key: this.language === 'zh' ? item.title : this.language === 'hk' ? item.title_hk : item.title_en,\r\n          value: this.extra_order_tip_form[index]\r\n        }\r\n      }))\r\n      this.$http\r\n        .post(`/api/order/updateExtra`, formdata)\r\n        .then(response => {\r\n          if (response.data.code == 0) {\r\n            if (parseFloat(this.result_cv19.prob) >= 50) {\r\n              this.showHighRisk = true\r\n            }\r\n            this.step = 6\r\n          } else {\r\n            this.$toast({\r\n              mask: false,\r\n              message: 'Submit Error'\r\n            })\r\n          }\r\n        }).catch(error => {\r\n          this.$toast({\r\n            mask: false,\r\n            message: 'Submit Error'\r\n          })\r\n        })\r\n    },\r\n    handleLogin () {\r\n      this.$router.push('/login')\r\n    },\r\n    parseInt (value) {\r\n      return parseInt(value)\r\n    }\r\n  },\r\n  destroyed () {\r\n    if (this.circleInterval != null) {\r\n      clearInterval(this.circleInterval)\r\n    }\r\n    if (this.photo_clip != null) {\r\n      this.photo_clip.destroy()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scope lang=\"scss\">\r\nbody{\r\n  overflow-x: hidden;\r\n}\r\n.order-layout {\r\n  background: #ffffff;\r\n  width: 100%;\r\n  overflow-x: hidden;\r\n  position: relative;\r\n  &:after{\r\n    position:absolute;\r\n    left:-30%;\r\n    right:0;\r\n    bottom:0;\r\n    content:\"\";\r\n    z-index:1;\r\n    height:83%;\r\n    width:160%;\r\n    border-radius:50% 50% 0 0;\r\n    background: linear-gradient(#1989fa, #89c4ff);\r\n  }\r\n  .order-title {\r\n    width: 100%;\r\n    height: 16px;\r\n    font-size: 15px;\r\n    color: #1989fa;\r\n    text-align: center;\r\n    margin-top:15px;\r\n    z-index:10;\r\n  }\r\n  .order-tip{\r\n    width: 100%;\r\n    height: 20px;\r\n    font-size: 11px;\r\n    color: #1989fa;\r\n    text-align: center;\r\n    margin-top:4px;\r\n    z-index:10;\r\n  }\r\n  .order-content{\r\n    width:100%;\r\n    // height:400px;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    z-index:100;\r\n    position: relative;\r\n    margin-top:80px;\r\n    .order-help{\r\n      width:100%;\r\n      font-size: 18px;\r\n      color: #ffffff;\r\n      text-align: center;\r\n      margin-top:20px;\r\n    }\r\n    .order-uploader{\r\n      width:200px;\r\n      height:30px;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      margin-top:20px;\r\n    }\r\n    .order-button{\r\n      width:200px;\r\n      height:30px;\r\n      border-radius: 15px;\r\n      color:#ffffff;\r\n      background: none;\r\n      &.order-button-white{\r\n        color:#1989fa;\r\n        background: #ffffff;\r\n        box-shadow: 0px 10px 10px rgba(0,0,0,0.4)\r\n      }\r\n    }\r\n    .order-reset{\r\n      width:240px;\r\n      display: flex;\r\n      margin-top:0;\r\n      justify-content: space-between;\r\n      margin-bottom:10px;\r\n      .order-uploader{\r\n        width:100px;\r\n        margin-top:0;\r\n        .order-button{\r\n          width:100px;\r\n        }\r\n      }\r\n    }\r\n    .order-tip-text{\r\n      width:100%;\r\n      font-size: 12px;\r\n      color: #ffffff;\r\n      text-align: left;\r\n      margin-top:20px;\r\n    }\r\n    .order-clip{\r\n      width:100%;\r\n      height:150px;\r\n      z-index: 100;\r\n      margin-bottom:20px;\r\n      margin-top:20px;\r\n    }\r\n    .order-example-text{\r\n      width:100%;\r\n      font-size: 12px;\r\n      color: #ffffff;\r\n      text-align: left;\r\n      margin-top:20px;\r\n    }\r\n    .order-example{\r\n      width: 285px;\r\n      height: 75px;\r\n      border-radius: 5px;\r\n      margin-top:20px;\r\n      box-shadow: 0px 10px 10px rgba(0,0,0,0.4);\r\n    }\r\n    .order-result{\r\n      width:100%;\r\n      margin-top: 30px;\r\n      margin-bottom: 20px;\r\n      display: flex;\r\n      justify-content: center;\r\n      .result-item{\r\n        flex:1;\r\n        display: flex;\r\n        justify-content: flex-start;\r\n        align-items: center;\r\n        flex-direction: column;\r\n        padding:10px 0;\r\n        .result-title{\r\n          color:#ffffff;\r\n          font-size: 22px;\r\n          font-weight: bold;\r\n          margin-bottom:15px;\r\n        }\r\n        .result-label{\r\n          color:#ffffff;\r\n          font-size: 35px;\r\n          font-weight: bold;\r\n          margin-bottom:20px;\r\n          &.result-label-high{\r\n            color:#ee0a24;\r\n          }\r\n        }\r\n        .order-low-risk{\r\n          width: 160px;\r\n          height:30px;\r\n          background: none;\r\n          border-color:#ffffff;\r\n          border-width: 3px;\r\n          color:#ffffff;\r\n          font-weight: bold;\r\n          font-size:18px;\r\n          justify-content: center;\r\n        }\r\n        .van-circle__text{\r\n          color:#ffffff;\r\n          font-size:14px;\r\n          font-weight: bold;\r\n        }\r\n      }\r\n    }\r\n    .order-prview-text{\r\n      width:80%;\r\n      font-size: 12px;\r\n      color: #ffffff;\r\n      text-align: center;\r\n      margin-top:20px;\r\n    }\r\n    .order-preview-image{\r\n      width: 285px;\r\n      height: 75px;\r\n      display: block;\r\n      margin-top: 20px;\r\n    }\r\n    .order-preview-buttons{\r\n      width:80%;\r\n      display: flex;\r\n      margin-top:20px;;\r\n      justify-content: space-between;\r\n      .order-button{\r\n        width: 120px;\r\n      }\r\n    }\r\n  }\r\n  .van-circle__text{\r\n    color:#ffffff;\r\n    font-size:22px;\r\n    font-weight: bold;\r\n  }\r\n  .order-result-tip {\r\n    color:#1989fa;\r\n    font-size: 18px;\r\n    font-weight: bold;\r\n    line-height: 20px;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n  }\r\n  .order-result-tip-a {\r\n    color:#1989fa;\r\n    font-size: 18px;\r\n    font-weight: bold;\r\n    line-height: 20px;\r\n  }\r\n  .dialog-content{\r\n    width:100%;\r\n    font-size:14px;\r\n    padding:20px;\r\n    height:auto;\r\n    color:#8a8a8a;\r\n    .order-result-tip-a {\r\n      font-size: 14px;\r\n      font-weight: bold;\r\n    }\r\n  }\r\n}\r\n.van-dialog.high-risk-dialog {\r\n  top: auto;\r\n  bottom: 5%;\r\n  transform: translate(-50%, -50%);\r\n  .van-dialog__confirm {\r\n    color: #1989fa;\r\n    font-size: 14px;\r\n    font-weight: bold;\r\n    height: 30px;\r\n  }\r\n}\r\n.display-id{\r\n  width:100%;\r\n  margin-top: 30px;\r\n  margin-bottom: 20px;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=503c27fb&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&scope=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","(function() {\n\n    var debug = false;\n\n    var root = this;\n\n    var EXIF = function(obj) {\n        if (obj instanceof EXIF) return obj;\n        if (!(this instanceof EXIF)) return new EXIF(obj);\n        this.EXIFwrapped = obj;\n    };\n\n    if (typeof exports !== 'undefined') {\n        if (typeof module !== 'undefined' && module.exports) {\n            exports = module.exports = EXIF;\n        }\n        exports.EXIF = EXIF;\n    } else {\n        root.EXIF = EXIF;\n    }\n\n    var ExifTags = EXIF.Tags = {\n\n        // version tags\n        0x9000 : \"ExifVersion\",             // EXIF version\n        0xA000 : \"FlashpixVersion\",         // Flashpix format version\n\n        // colorspace tags\n        0xA001 : \"ColorSpace\",              // Color space information tag\n\n        // image configuration\n        0xA002 : \"PixelXDimension\",         // Valid width of meaningful image\n        0xA003 : \"PixelYDimension\",         // Valid height of meaningful image\n        0x9101 : \"ComponentsConfiguration\", // Information about channels\n        0x9102 : \"CompressedBitsPerPixel\",  // Compressed bits per pixel\n\n        // user information\n        0x927C : \"MakerNote\",               // Any desired information written by the manufacturer\n        0x9286 : \"UserComment\",             // Comments by user\n\n        // related file\n        0xA004 : \"RelatedSoundFile\",        // Name of related sound file\n\n        // date and time\n        0x9003 : \"DateTimeOriginal\",        // Date and time when the original image was generated\n        0x9004 : \"DateTimeDigitized\",       // Date and time when the image was stored digitally\n        0x9290 : \"SubsecTime\",              // Fractions of seconds for DateTime\n        0x9291 : \"SubsecTimeOriginal\",      // Fractions of seconds for DateTimeOriginal\n        0x9292 : \"SubsecTimeDigitized\",     // Fractions of seconds for DateTimeDigitized\n\n        // picture-taking conditions\n        0x829A : \"ExposureTime\",            // Exposure time (in seconds)\n        0x829D : \"FNumber\",                 // F number\n        0x8822 : \"ExposureProgram\",         // Exposure program\n        0x8824 : \"SpectralSensitivity\",     // Spectral sensitivity\n        0x8827 : \"ISOSpeedRatings\",         // ISO speed rating\n        0x8828 : \"OECF\",                    // Optoelectric conversion factor\n        0x9201 : \"ShutterSpeedValue\",       // Shutter speed\n        0x9202 : \"ApertureValue\",           // Lens aperture\n        0x9203 : \"BrightnessValue\",         // Value of brightness\n        0x9204 : \"ExposureBias\",            // Exposure bias\n        0x9205 : \"MaxApertureValue\",        // Smallest F number of lens\n        0x9206 : \"SubjectDistance\",         // Distance to subject in meters\n        0x9207 : \"MeteringMode\",            // Metering mode\n        0x9208 : \"LightSource\",             // Kind of light source\n        0x9209 : \"Flash\",                   // Flash status\n        0x9214 : \"SubjectArea\",             // Location and area of main subject\n        0x920A : \"FocalLength\",             // Focal length of the lens in mm\n        0xA20B : \"FlashEnergy\",             // Strobe energy in BCPS\n        0xA20C : \"SpatialFrequencyResponse\",    //\n        0xA20E : \"FocalPlaneXResolution\",   // Number of pixels in width direction per FocalPlaneResolutionUnit\n        0xA20F : \"FocalPlaneYResolution\",   // Number of pixels in height direction per FocalPlaneResolutionUnit\n        0xA210 : \"FocalPlaneResolutionUnit\",    // Unit for measuring FocalPlaneXResolution and FocalPlaneYResolution\n        0xA214 : \"SubjectLocation\",         // Location of subject in image\n        0xA215 : \"ExposureIndex\",           // Exposure index selected on camera\n        0xA217 : \"SensingMethod\",           // Image sensor type\n        0xA300 : \"FileSource\",              // Image source (3 == DSC)\n        0xA301 : \"SceneType\",               // Scene type (1 == directly photographed)\n        0xA302 : \"CFAPattern\",              // Color filter array geometric pattern\n        0xA401 : \"CustomRendered\",          // Special processing\n        0xA402 : \"ExposureMode\",            // Exposure mode\n        0xA403 : \"WhiteBalance\",            // 1 = auto white balance, 2 = manual\n        0xA404 : \"DigitalZoomRation\",       // Digital zoom ratio\n        0xA405 : \"FocalLengthIn35mmFilm\",   // Equivalent foacl length assuming 35mm film camera (in mm)\n        0xA406 : \"SceneCaptureType\",        // Type of scene\n        0xA407 : \"GainControl\",             // Degree of overall image gain adjustment\n        0xA408 : \"Contrast\",                // Direction of contrast processing applied by camera\n        0xA409 : \"Saturation\",              // Direction of saturation processing applied by camera\n        0xA40A : \"Sharpness\",               // Direction of sharpness processing applied by camera\n        0xA40B : \"DeviceSettingDescription\",    //\n        0xA40C : \"SubjectDistanceRange\",    // Distance to subject\n\n        // other tags\n        0xA005 : \"InteroperabilityIFDPointer\",\n        0xA420 : \"ImageUniqueID\"            // Identifier assigned uniquely to each image\n    };\n\n    var TiffTags = EXIF.TiffTags = {\n        0x0100 : \"ImageWidth\",\n        0x0101 : \"ImageHeight\",\n        0x8769 : \"ExifIFDPointer\",\n        0x8825 : \"GPSInfoIFDPointer\",\n        0xA005 : \"InteroperabilityIFDPointer\",\n        0x0102 : \"BitsPerSample\",\n        0x0103 : \"Compression\",\n        0x0106 : \"PhotometricInterpretation\",\n        0x0112 : \"Orientation\",\n        0x0115 : \"SamplesPerPixel\",\n        0x011C : \"PlanarConfiguration\",\n        0x0212 : \"YCbCrSubSampling\",\n        0x0213 : \"YCbCrPositioning\",\n        0x011A : \"XResolution\",\n        0x011B : \"YResolution\",\n        0x0128 : \"ResolutionUnit\",\n        0x0111 : \"StripOffsets\",\n        0x0116 : \"RowsPerStrip\",\n        0x0117 : \"StripByteCounts\",\n        0x0201 : \"JPEGInterchangeFormat\",\n        0x0202 : \"JPEGInterchangeFormatLength\",\n        0x012D : \"TransferFunction\",\n        0x013E : \"WhitePoint\",\n        0x013F : \"PrimaryChromaticities\",\n        0x0211 : \"YCbCrCoefficients\",\n        0x0214 : \"ReferenceBlackWhite\",\n        0x0132 : \"DateTime\",\n        0x010E : \"ImageDescription\",\n        0x010F : \"Make\",\n        0x0110 : \"Model\",\n        0x0131 : \"Software\",\n        0x013B : \"Artist\",\n        0x8298 : \"Copyright\"\n    };\n\n    var GPSTags = EXIF.GPSTags = {\n        0x0000 : \"GPSVersionID\",\n        0x0001 : \"GPSLatitudeRef\",\n        0x0002 : \"GPSLatitude\",\n        0x0003 : \"GPSLongitudeRef\",\n        0x0004 : \"GPSLongitude\",\n        0x0005 : \"GPSAltitudeRef\",\n        0x0006 : \"GPSAltitude\",\n        0x0007 : \"GPSTimeStamp\",\n        0x0008 : \"GPSSatellites\",\n        0x0009 : \"GPSStatus\",\n        0x000A : \"GPSMeasureMode\",\n        0x000B : \"GPSDOP\",\n        0x000C : \"GPSSpeedRef\",\n        0x000D : \"GPSSpeed\",\n        0x000E : \"GPSTrackRef\",\n        0x000F : \"GPSTrack\",\n        0x0010 : \"GPSImgDirectionRef\",\n        0x0011 : \"GPSImgDirection\",\n        0x0012 : \"GPSMapDatum\",\n        0x0013 : \"GPSDestLatitudeRef\",\n        0x0014 : \"GPSDestLatitude\",\n        0x0015 : \"GPSDestLongitudeRef\",\n        0x0016 : \"GPSDestLongitude\",\n        0x0017 : \"GPSDestBearingRef\",\n        0x0018 : \"GPSDestBearing\",\n        0x0019 : \"GPSDestDistanceRef\",\n        0x001A : \"GPSDestDistance\",\n        0x001B : \"GPSProcessingMethod\",\n        0x001C : \"GPSAreaInformation\",\n        0x001D : \"GPSDateStamp\",\n        0x001E : \"GPSDifferential\"\n    };\n\n     // EXIF 2.3 Spec\n    var IFD1Tags = EXIF.IFD1Tags = {\n        0x0100: \"ImageWidth\",\n        0x0101: \"ImageHeight\",\n        0x0102: \"BitsPerSample\",\n        0x0103: \"Compression\",\n        0x0106: \"PhotometricInterpretation\",\n        0x0111: \"StripOffsets\",\n        0x0112: \"Orientation\",\n        0x0115: \"SamplesPerPixel\",\n        0x0116: \"RowsPerStrip\",\n        0x0117: \"StripByteCounts\",\n        0x011A: \"XResolution\",\n        0x011B: \"YResolution\",\n        0x011C: \"PlanarConfiguration\",\n        0x0128: \"ResolutionUnit\",\n        0x0201: \"JpegIFOffset\",    // When image format is JPEG, this value show offset to JPEG data stored.(aka \"ThumbnailOffset\" or \"JPEGInterchangeFormat\")\n        0x0202: \"JpegIFByteCount\", // When image format is JPEG, this value shows data size of JPEG image (aka \"ThumbnailLength\" or \"JPEGInterchangeFormatLength\")\n        0x0211: \"YCbCrCoefficients\",\n        0x0212: \"YCbCrSubSampling\",\n        0x0213: \"YCbCrPositioning\",\n        0x0214: \"ReferenceBlackWhite\"\n    };\n\n    var StringValues = EXIF.StringValues = {\n        ExposureProgram : {\n            0 : \"Not defined\",\n            1 : \"Manual\",\n            2 : \"Normal program\",\n            3 : \"Aperture priority\",\n            4 : \"Shutter priority\",\n            5 : \"Creative program\",\n            6 : \"Action program\",\n            7 : \"Portrait mode\",\n            8 : \"Landscape mode\"\n        },\n        MeteringMode : {\n            0 : \"Unknown\",\n            1 : \"Average\",\n            2 : \"CenterWeightedAverage\",\n            3 : \"Spot\",\n            4 : \"MultiSpot\",\n            5 : \"Pattern\",\n            6 : \"Partial\",\n            255 : \"Other\"\n        },\n        LightSource : {\n            0 : \"Unknown\",\n            1 : \"Daylight\",\n            2 : \"Fluorescent\",\n            3 : \"Tungsten (incandescent light)\",\n            4 : \"Flash\",\n            9 : \"Fine weather\",\n            10 : \"Cloudy weather\",\n            11 : \"Shade\",\n            12 : \"Daylight fluorescent (D 5700 - 7100K)\",\n            13 : \"Day white fluorescent (N 4600 - 5400K)\",\n            14 : \"Cool white fluorescent (W 3900 - 4500K)\",\n            15 : \"White fluorescent (WW 3200 - 3700K)\",\n            17 : \"Standard light A\",\n            18 : \"Standard light B\",\n            19 : \"Standard light C\",\n            20 : \"D55\",\n            21 : \"D65\",\n            22 : \"D75\",\n            23 : \"D50\",\n            24 : \"ISO studio tungsten\",\n            255 : \"Other\"\n        },\n        Flash : {\n            0x0000 : \"Flash did not fire\",\n            0x0001 : \"Flash fired\",\n            0x0005 : \"Strobe return light not detected\",\n            0x0007 : \"Strobe return light detected\",\n            0x0009 : \"Flash fired, compulsory flash mode\",\n            0x000D : \"Flash fired, compulsory flash mode, return light not detected\",\n            0x000F : \"Flash fired, compulsory flash mode, return light detected\",\n            0x0010 : \"Flash did not fire, compulsory flash mode\",\n            0x0018 : \"Flash did not fire, auto mode\",\n            0x0019 : \"Flash fired, auto mode\",\n            0x001D : \"Flash fired, auto mode, return light not detected\",\n            0x001F : \"Flash fired, auto mode, return light detected\",\n            0x0020 : \"No flash function\",\n            0x0041 : \"Flash fired, red-eye reduction mode\",\n            0x0045 : \"Flash fired, red-eye reduction mode, return light not detected\",\n            0x0047 : \"Flash fired, red-eye reduction mode, return light detected\",\n            0x0049 : \"Flash fired, compulsory flash mode, red-eye reduction mode\",\n            0x004D : \"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected\",\n            0x004F : \"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected\",\n            0x0059 : \"Flash fired, auto mode, red-eye reduction mode\",\n            0x005D : \"Flash fired, auto mode, return light not detected, red-eye reduction mode\",\n            0x005F : \"Flash fired, auto mode, return light detected, red-eye reduction mode\"\n        },\n        SensingMethod : {\n            1 : \"Not defined\",\n            2 : \"One-chip color area sensor\",\n            3 : \"Two-chip color area sensor\",\n            4 : \"Three-chip color area sensor\",\n            5 : \"Color sequential area sensor\",\n            7 : \"Trilinear sensor\",\n            8 : \"Color sequential linear sensor\"\n        },\n        SceneCaptureType : {\n            0 : \"Standard\",\n            1 : \"Landscape\",\n            2 : \"Portrait\",\n            3 : \"Night scene\"\n        },\n        SceneType : {\n            1 : \"Directly photographed\"\n        },\n        CustomRendered : {\n            0 : \"Normal process\",\n            1 : \"Custom process\"\n        },\n        WhiteBalance : {\n            0 : \"Auto white balance\",\n            1 : \"Manual white balance\"\n        },\n        GainControl : {\n            0 : \"None\",\n            1 : \"Low gain up\",\n            2 : \"High gain up\",\n            3 : \"Low gain down\",\n            4 : \"High gain down\"\n        },\n        Contrast : {\n            0 : \"Normal\",\n            1 : \"Soft\",\n            2 : \"Hard\"\n        },\n        Saturation : {\n            0 : \"Normal\",\n            1 : \"Low saturation\",\n            2 : \"High saturation\"\n        },\n        Sharpness : {\n            0 : \"Normal\",\n            1 : \"Soft\",\n            2 : \"Hard\"\n        },\n        SubjectDistanceRange : {\n            0 : \"Unknown\",\n            1 : \"Macro\",\n            2 : \"Close view\",\n            3 : \"Distant view\"\n        },\n        FileSource : {\n            3 : \"DSC\"\n        },\n\n        Components : {\n            0 : \"\",\n            1 : \"Y\",\n            2 : \"Cb\",\n            3 : \"Cr\",\n            4 : \"R\",\n            5 : \"G\",\n            6 : \"B\"\n        }\n    };\n\n    function addEvent(element, event, handler) {\n        if (element.addEventListener) {\n            element.addEventListener(event, handler, false);\n        } else if (element.attachEvent) {\n            element.attachEvent(\"on\" + event, handler);\n        }\n    }\n\n    function imageHasData(img) {\n        return !!(img.exifdata);\n    }\n\n\n    function base64ToArrayBuffer(base64, contentType) {\n        contentType = contentType || base64.match(/^data\\:([^\\;]+)\\;base64,/mi)[1] || ''; // e.g. 'data:image/jpeg;base64,...' => 'image/jpeg'\n        base64 = base64.replace(/^data\\:([^\\;]+)\\;base64,/gmi, '');\n        var binary = atob(base64);\n        var len = binary.length;\n        var buffer = new ArrayBuffer(len);\n        var view = new Uint8Array(buffer);\n        for (var i = 0; i < len; i++) {\n            view[i] = binary.charCodeAt(i);\n        }\n        return buffer;\n    }\n\n    function objectURLToBlob(url, callback) {\n        var http = new XMLHttpRequest();\n        http.open(\"GET\", url, true);\n        http.responseType = \"blob\";\n        http.onload = function(e) {\n            if (this.status == 200 || this.status === 0) {\n                callback(this.response);\n            }\n        };\n        http.send();\n    }\n\n    function getImageData(img, callback) {\n        function handleBinaryFile(binFile) {\n            var data = findEXIFinJPEG(binFile);\n            img.exifdata = data || {};\n            var iptcdata = findIPTCinJPEG(binFile);\n            img.iptcdata = iptcdata || {};\n            if (EXIF.isXmpEnabled) {\n               var xmpdata= findXMPinJPEG(binFile);\n               img.xmpdata = xmpdata || {};               \n            }\n            if (callback) {\n                callback.call(img);\n            }\n        }\n\n        if (img.src) {\n            if (/^data\\:/i.test(img.src)) { // Data URI\n                var arrayBuffer = base64ToArrayBuffer(img.src);\n                handleBinaryFile(arrayBuffer);\n\n            } else if (/^blob\\:/i.test(img.src)) { // Object URL\n                var fileReader = new FileReader();\n                fileReader.onload = function(e) {\n                    handleBinaryFile(e.target.result);\n                };\n                objectURLToBlob(img.src, function (blob) {\n                    fileReader.readAsArrayBuffer(blob);\n                });\n            } else {\n                var http = new XMLHttpRequest();\n                http.onload = function() {\n                    if (this.status == 200 || this.status === 0) {\n                        handleBinaryFile(http.response);\n                    } else {\n                        throw \"Could not load image\";\n                    }\n                    http = null;\n                };\n                http.open(\"GET\", img.src, true);\n                http.responseType = \"arraybuffer\";\n                http.send(null);\n            }\n        } else if (self.FileReader && (img instanceof self.Blob || img instanceof self.File)) {\n            var fileReader = new FileReader();\n            fileReader.onload = function(e) {\n                if (debug) console.log(\"Got file of length \" + e.target.result.byteLength);\n                handleBinaryFile(e.target.result);\n            };\n\n            fileReader.readAsArrayBuffer(img);\n        }\n    }\n\n    function findEXIFinJPEG(file) {\n        var dataView = new DataView(file);\n\n        if (debug) console.log(\"Got file of length \" + file.byteLength);\n        if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\n            if (debug) console.log(\"Not a valid JPEG\");\n            return false; // not a valid jpeg\n        }\n\n        var offset = 2,\n            length = file.byteLength,\n            marker;\n\n        while (offset < length) {\n            if (dataView.getUint8(offset) != 0xFF) {\n                if (debug) console.log(\"Not a valid marker at offset \" + offset + \", found: \" + dataView.getUint8(offset));\n                return false; // not a valid marker, something is wrong\n            }\n\n            marker = dataView.getUint8(offset + 1);\n            if (debug) console.log(marker);\n\n            // we could implement handling for other markers here,\n            // but we're only looking for 0xFFE1 for EXIF data\n\n            if (marker == 225) {\n                if (debug) console.log(\"Found 0xFFE1 marker\");\n\n                return readEXIFData(dataView, offset + 4, dataView.getUint16(offset + 2) - 2);\n\n                // offset += 2 + file.getShortAt(offset+2, true);\n\n            } else {\n                offset += 2 + dataView.getUint16(offset+2);\n            }\n\n        }\n\n    }\n\n    function findIPTCinJPEG(file) {\n        var dataView = new DataView(file);\n\n        if (debug) console.log(\"Got file of length \" + file.byteLength);\n        if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\n            if (debug) console.log(\"Not a valid JPEG\");\n            return false; // not a valid jpeg\n        }\n\n        var offset = 2,\n            length = file.byteLength;\n\n\n        var isFieldSegmentStart = function(dataView, offset){\n            return (\n                dataView.getUint8(offset) === 0x38 &&\n                dataView.getUint8(offset+1) === 0x42 &&\n                dataView.getUint8(offset+2) === 0x49 &&\n                dataView.getUint8(offset+3) === 0x4D &&\n                dataView.getUint8(offset+4) === 0x04 &&\n                dataView.getUint8(offset+5) === 0x04\n            );\n        };\n\n        while (offset < length) {\n\n            if ( isFieldSegmentStart(dataView, offset )){\n\n                // Get the length of the name header (which is padded to an even number of bytes)\n                var nameHeaderLength = dataView.getUint8(offset+7);\n                if(nameHeaderLength % 2 !== 0) nameHeaderLength += 1;\n                // Check for pre photoshop 6 format\n                if(nameHeaderLength === 0) {\n                    // Always 4\n                    nameHeaderLength = 4;\n                }\n\n                var startOffset = offset + 8 + nameHeaderLength;\n                var sectionLength = dataView.getUint16(offset + 6 + nameHeaderLength);\n\n                return readIPTCData(file, startOffset, sectionLength);\n\n                break;\n\n            }\n\n\n            // Not the marker, continue searching\n            offset++;\n\n        }\n\n    }\n    var IptcFieldMap = {\n        0x78 : 'caption',\n        0x6E : 'credit',\n        0x19 : 'keywords',\n        0x37 : 'dateCreated',\n        0x50 : 'byline',\n        0x55 : 'bylineTitle',\n        0x7A : 'captionWriter',\n        0x69 : 'headline',\n        0x74 : 'copyright',\n        0x0F : 'category'\n    };\n    function readIPTCData(file, startOffset, sectionLength){\n        var dataView = new DataView(file);\n        var data = {};\n        var fieldValue, fieldName, dataSize, segmentType, segmentSize;\n        var segmentStartPos = startOffset;\n        while(segmentStartPos < startOffset+sectionLength) {\n            if(dataView.getUint8(segmentStartPos) === 0x1C && dataView.getUint8(segmentStartPos+1) === 0x02){\n                segmentType = dataView.getUint8(segmentStartPos+2);\n                if(segmentType in IptcFieldMap) {\n                    dataSize = dataView.getInt16(segmentStartPos+3);\n                    segmentSize = dataSize + 5;\n                    fieldName = IptcFieldMap[segmentType];\n                    fieldValue = getStringFromDB(dataView, segmentStartPos+5, dataSize);\n                    // Check if we already stored a value with this name\n                    if(data.hasOwnProperty(fieldName)) {\n                        // Value already stored with this name, create multivalue field\n                        if(data[fieldName] instanceof Array) {\n                            data[fieldName].push(fieldValue);\n                        }\n                        else {\n                            data[fieldName] = [data[fieldName], fieldValue];\n                        }\n                    }\n                    else {\n                        data[fieldName] = fieldValue;\n                    }\n                }\n\n            }\n            segmentStartPos++;\n        }\n        return data;\n    }\n\n\n\n    function readTags(file, tiffStart, dirStart, strings, bigEnd) {\n        var entries = file.getUint16(dirStart, !bigEnd),\n            tags = {},\n            entryOffset, tag,\n            i;\n\n        for (i=0;i<entries;i++) {\n            entryOffset = dirStart + i*12 + 2;\n            tag = strings[file.getUint16(entryOffset, !bigEnd)];\n            if (!tag && debug) console.log(\"Unknown tag: \" + file.getUint16(entryOffset, !bigEnd));\n            tags[tag] = readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd);\n        }\n        return tags;\n    }\n\n\n    function readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd) {\n        var type = file.getUint16(entryOffset+2, !bigEnd),\n            numValues = file.getUint32(entryOffset+4, !bigEnd),\n            valueOffset = file.getUint32(entryOffset+8, !bigEnd) + tiffStart,\n            offset,\n            vals, val, n,\n            numerator, denominator;\n\n        switch (type) {\n            case 1: // byte, 8-bit unsigned int\n            case 7: // undefined, 8-bit byte, value depending on field\n                if (numValues == 1) {\n                    return file.getUint8(entryOffset + 8, !bigEnd);\n                } else {\n                    offset = numValues > 4 ? valueOffset : (entryOffset + 8);\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getUint8(offset + n);\n                    }\n                    return vals;\n                }\n\n            case 2: // ascii, 8-bit byte\n                offset = numValues > 4 ? valueOffset : (entryOffset + 8);\n                return getStringFromDB(file, offset, numValues-1);\n\n            case 3: // short, 16 bit int\n                if (numValues == 1) {\n                    return file.getUint16(entryOffset + 8, !bigEnd);\n                } else {\n                    offset = numValues > 2 ? valueOffset : (entryOffset + 8);\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getUint16(offset + 2*n, !bigEnd);\n                    }\n                    return vals;\n                }\n\n            case 4: // long, 32 bit int\n                if (numValues == 1) {\n                    return file.getUint32(entryOffset + 8, !bigEnd);\n                } else {\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getUint32(valueOffset + 4*n, !bigEnd);\n                    }\n                    return vals;\n                }\n\n            case 5:    // rational = two long values, first is numerator, second is denominator\n                if (numValues == 1) {\n                    numerator = file.getUint32(valueOffset, !bigEnd);\n                    denominator = file.getUint32(valueOffset+4, !bigEnd);\n                    val = new Number(numerator / denominator);\n                    val.numerator = numerator;\n                    val.denominator = denominator;\n                    return val;\n                } else {\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        numerator = file.getUint32(valueOffset + 8*n, !bigEnd);\n                        denominator = file.getUint32(valueOffset+4 + 8*n, !bigEnd);\n                        vals[n] = new Number(numerator / denominator);\n                        vals[n].numerator = numerator;\n                        vals[n].denominator = denominator;\n                    }\n                    return vals;\n                }\n\n            case 9: // slong, 32 bit signed int\n                if (numValues == 1) {\n                    return file.getInt32(entryOffset + 8, !bigEnd);\n                } else {\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getInt32(valueOffset + 4*n, !bigEnd);\n                    }\n                    return vals;\n                }\n\n            case 10: // signed rational, two slongs, first is numerator, second is denominator\n                if (numValues == 1) {\n                    return file.getInt32(valueOffset, !bigEnd) / file.getInt32(valueOffset+4, !bigEnd);\n                } else {\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getInt32(valueOffset + 8*n, !bigEnd) / file.getInt32(valueOffset+4 + 8*n, !bigEnd);\n                    }\n                    return vals;\n                }\n        }\n    }\n\n    /**\n    * Given an IFD (Image File Directory) start offset\n    * returns an offset to next IFD or 0 if it's the last IFD.\n    */\n    function getNextIFDOffset(dataView, dirStart, bigEnd){\n        //the first 2bytes means the number of directory entries contains in this IFD\n        var entries = dataView.getUint16(dirStart, !bigEnd);\n\n        // After last directory entry, there is a 4bytes of data,\n        // it means an offset to next IFD.\n        // If its value is '0x00000000', it means this is the last IFD and there is no linked IFD.\n\n        return dataView.getUint32(dirStart + 2 + entries * 12, !bigEnd); // each entry is 12 bytes long\n    }\n\n    function readThumbnailImage(dataView, tiffStart, firstIFDOffset, bigEnd){\n        // get the IFD1 offset\n        var IFD1OffsetPointer = getNextIFDOffset(dataView, tiffStart+firstIFDOffset, bigEnd);\n\n        if (!IFD1OffsetPointer) {\n            // console.log('******** IFD1Offset is empty, image thumb not found ********');\n            return {};\n        }\n        else if (IFD1OffsetPointer > dataView.byteLength) { // this should not happen\n            // console.log('******** IFD1Offset is outside the bounds of the DataView ********');\n            return {};\n        }\n        // console.log('*******  thumbnail IFD offset (IFD1) is: %s', IFD1OffsetPointer);\n\n        var thumbTags = readTags(dataView, tiffStart, tiffStart + IFD1OffsetPointer, IFD1Tags, bigEnd)\n\n        // EXIF 2.3 specification for JPEG format thumbnail\n\n        // If the value of Compression(0x0103) Tag in IFD1 is '6', thumbnail image format is JPEG.\n        // Most of Exif image uses JPEG format for thumbnail. In that case, you can get offset of thumbnail\n        // by JpegIFOffset(0x0201) Tag in IFD1, size of thumbnail by JpegIFByteCount(0x0202) Tag.\n        // Data format is ordinary JPEG format, starts from 0xFFD8 and ends by 0xFFD9. It seems that\n        // JPEG format and 160x120pixels of size are recommended thumbnail format for Exif2.1 or later.\n\n        if (thumbTags['Compression']) {\n            // console.log('Thumbnail image found!');\n\n            switch (thumbTags['Compression']) {\n                case 6:\n                    // console.log('Thumbnail image format is JPEG');\n                    if (thumbTags.JpegIFOffset && thumbTags.JpegIFByteCount) {\n                    // extract the thumbnail\n                        var tOffset = tiffStart + thumbTags.JpegIFOffset;\n                        var tLength = thumbTags.JpegIFByteCount;\n                        thumbTags['blob'] = new Blob([new Uint8Array(dataView.buffer, tOffset, tLength)], {\n                            type: 'image/jpeg'\n                        });\n                    }\n                break;\n\n            case 1:\n                console.log(\"Thumbnail image format is TIFF, which is not implemented.\");\n                break;\n            default:\n                console.log(\"Unknown thumbnail image format '%s'\", thumbTags['Compression']);\n            }\n        }\n        else if (thumbTags['PhotometricInterpretation'] == 2) {\n            console.log(\"Thumbnail image format is RGB, which is not implemented.\");\n        }\n        return thumbTags;\n    }\n\n    function getStringFromDB(buffer, start, length) {\n        var outstr = \"\";\n        for (n = start; n < start+length; n++) {\n            outstr += String.fromCharCode(buffer.getUint8(n));\n        }\n        return outstr;\n    }\n\n    function readEXIFData(file, start) {\n        if (getStringFromDB(file, start, 4) != \"Exif\") {\n            if (debug) console.log(\"Not valid EXIF data! \" + getStringFromDB(file, start, 4));\n            return false;\n        }\n\n        var bigEnd,\n            tags, tag,\n            exifData, gpsData,\n            tiffOffset = start + 6;\n\n        // test for TIFF validity and endianness\n        if (file.getUint16(tiffOffset) == 0x4949) {\n            bigEnd = false;\n        } else if (file.getUint16(tiffOffset) == 0x4D4D) {\n            bigEnd = true;\n        } else {\n            if (debug) console.log(\"Not valid TIFF data! (no 0x4949 or 0x4D4D)\");\n            return false;\n        }\n\n        if (file.getUint16(tiffOffset+2, !bigEnd) != 0x002A) {\n            if (debug) console.log(\"Not valid TIFF data! (no 0x002A)\");\n            return false;\n        }\n\n        var firstIFDOffset = file.getUint32(tiffOffset+4, !bigEnd);\n\n        if (firstIFDOffset < 0x00000008) {\n            if (debug) console.log(\"Not valid TIFF data! (First offset less than 8)\", file.getUint32(tiffOffset+4, !bigEnd));\n            return false;\n        }\n\n        tags = readTags(file, tiffOffset, tiffOffset + firstIFDOffset, TiffTags, bigEnd);\n\n        if (tags.ExifIFDPointer) {\n            exifData = readTags(file, tiffOffset, tiffOffset + tags.ExifIFDPointer, ExifTags, bigEnd);\n            for (tag in exifData) {\n                switch (tag) {\n                    case \"LightSource\" :\n                    case \"Flash\" :\n                    case \"MeteringMode\" :\n                    case \"ExposureProgram\" :\n                    case \"SensingMethod\" :\n                    case \"SceneCaptureType\" :\n                    case \"SceneType\" :\n                    case \"CustomRendered\" :\n                    case \"WhiteBalance\" :\n                    case \"GainControl\" :\n                    case \"Contrast\" :\n                    case \"Saturation\" :\n                    case \"Sharpness\" :\n                    case \"SubjectDistanceRange\" :\n                    case \"FileSource\" :\n                        exifData[tag] = StringValues[tag][exifData[tag]];\n                        break;\n\n                    case \"ExifVersion\" :\n                    case \"FlashpixVersion\" :\n                        exifData[tag] = String.fromCharCode(exifData[tag][0], exifData[tag][1], exifData[tag][2], exifData[tag][3]);\n                        break;\n\n                    case \"ComponentsConfiguration\" :\n                        exifData[tag] =\n                            StringValues.Components[exifData[tag][0]] +\n                            StringValues.Components[exifData[tag][1]] +\n                            StringValues.Components[exifData[tag][2]] +\n                            StringValues.Components[exifData[tag][3]];\n                        break;\n                }\n                tags[tag] = exifData[tag];\n            }\n        }\n\n        if (tags.GPSInfoIFDPointer) {\n            gpsData = readTags(file, tiffOffset, tiffOffset + tags.GPSInfoIFDPointer, GPSTags, bigEnd);\n            for (tag in gpsData) {\n                switch (tag) {\n                    case \"GPSVersionID\" :\n                        gpsData[tag] = gpsData[tag][0] +\n                            \".\" + gpsData[tag][1] +\n                            \".\" + gpsData[tag][2] +\n                            \".\" + gpsData[tag][3];\n                        break;\n                }\n                tags[tag] = gpsData[tag];\n            }\n        }\n\n        // extract thumbnail\n        tags['thumbnail'] = readThumbnailImage(file, tiffOffset, firstIFDOffset, bigEnd);\n\n        return tags;\n    }\n\n   function findXMPinJPEG(file) {\n\n        if (!('DOMParser' in self)) {\n            // console.warn('XML parsing not supported without DOMParser');\n            return;\n        }\n        var dataView = new DataView(file);\n\n        if (debug) console.log(\"Got file of length \" + file.byteLength);\n        if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\n           if (debug) console.log(\"Not a valid JPEG\");\n           return false; // not a valid jpeg\n        }\n\n        var offset = 2,\n            length = file.byteLength,\n            dom = new DOMParser();\n\n        while (offset < (length-4)) {\n            if (getStringFromDB(dataView, offset, 4) == \"http\") {\n                var startOffset = offset - 1;\n                var sectionLength = dataView.getUint16(offset - 2) - 1;\n                var xmpString = getStringFromDB(dataView, startOffset, sectionLength)\n                var xmpEndIndex = xmpString.indexOf('xmpmeta>') + 8;\n                xmpString = xmpString.substring( xmpString.indexOf( '<x:xmpmeta' ), xmpEndIndex );\n\n                var indexOfXmp = xmpString.indexOf('x:xmpmeta') + 10\n                //Many custom written programs embed xmp/xml without any namespace. Following are some of them.\n                //Without these namespaces, XML is thought to be invalid by parsers\n                xmpString = xmpString.slice(0, indexOfXmp)\n                            + 'xmlns:Iptc4xmpCore=\"http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/\" '\n                            + 'xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" '\n                            + 'xmlns:tiff=\"http://ns.adobe.com/tiff/1.0/\" '\n                            + 'xmlns:plus=\"http://schemas.android.com/apk/lib/com.google.android.gms.plus\" '\n                            + 'xmlns:ext=\"http://www.gettyimages.com/xsltExtension/1.0\" '\n                            + 'xmlns:exif=\"http://ns.adobe.com/exif/1.0/\" '\n                            + 'xmlns:stEvt=\"http://ns.adobe.com/xap/1.0/sType/ResourceEvent#\" '\n                            + 'xmlns:stRef=\"http://ns.adobe.com/xap/1.0/sType/ResourceRef#\" '\n                            + 'xmlns:crs=\"http://ns.adobe.com/camera-raw-settings/1.0/\" '\n                            + 'xmlns:xapGImg=\"http://ns.adobe.com/xap/1.0/g/img/\" '\n                            + 'xmlns:Iptc4xmpExt=\"http://iptc.org/std/Iptc4xmpExt/2008-02-29/\" '\n                            + xmpString.slice(indexOfXmp)\n\n                var domDocument = dom.parseFromString( xmpString, 'text/xml' );\n                return xml2Object(domDocument);\n            } else{\n             offset++;\n            }\n        }\n    }\n\n    function xml2json(xml) {\n        var json = {};\n      \n        if (xml.nodeType == 1) { // element node\n          if (xml.attributes.length > 0) {\n            json['@attributes'] = {};\n            for (var j = 0; j < xml.attributes.length; j++) {\n              var attribute = xml.attributes.item(j);\n              json['@attributes'][attribute.nodeName] = attribute.nodeValue;\n            }\n          }\n        } else if (xml.nodeType == 3) { // text node\n          return xml.nodeValue;\n        }\n      \n        // deal with children\n        if (xml.hasChildNodes()) {\n          for(var i = 0; i < xml.childNodes.length; i++) {\n            var child = xml.childNodes.item(i);\n            var nodeName = child.nodeName;\n            if (json[nodeName] == null) {\n              json[nodeName] = xml2json(child);\n            } else {\n              if (json[nodeName].push == null) {\n                var old = json[nodeName];\n                json[nodeName] = [];\n                json[nodeName].push(old);\n              }\n              json[nodeName].push(xml2json(child));\n            }\n          }\n        }\n        \n        return json;\n    }\n\n    function xml2Object(xml) {\n        try {\n            var obj = {};\n            if (xml.children.length > 0) {\n              for (var i = 0; i < xml.children.length; i++) {\n                var item = xml.children.item(i);\n                var attributes = item.attributes;\n                for(var idx in attributes) {\n                    var itemAtt = attributes[idx];\n                    var dataKey = itemAtt.nodeName;\n                    var dataValue = itemAtt.nodeValue;\n\n                    if(dataKey !== undefined) {\n                        obj[dataKey] = dataValue;\n                    }\n                }\n                var nodeName = item.nodeName;\n\n                if (typeof (obj[nodeName]) == \"undefined\") {\n                  obj[nodeName] = xml2json(item);\n                } else {\n                  if (typeof (obj[nodeName].push) == \"undefined\") {\n                    var old = obj[nodeName];\n\n                    obj[nodeName] = [];\n                    obj[nodeName].push(old);\n                  }\n                  obj[nodeName].push(xml2json(item));\n                }\n              }\n            } else {\n              obj = xml.textContent;\n            }\n            return obj;\n          } catch (e) {\n              console.log(e.message);\n          }\n    }\n\n    EXIF.enableXmp = function() {\n        EXIF.isXmpEnabled = true;\n    }\n\n    EXIF.disableXmp = function() {\n        EXIF.isXmpEnabled = false;\n    }\n\n    EXIF.getData = function(img, callback) {\n        if (((self.Image && img instanceof self.Image)\n            || (self.HTMLImageElement && img instanceof self.HTMLImageElement))\n            && !img.complete)\n            return false;\n\n        if (!imageHasData(img)) {\n            getImageData(img, callback);\n        } else {\n            if (callback) {\n                callback.call(img);\n            }\n        }\n        return true;\n    }\n\n    EXIF.getTag = function(img, tag) {\n        if (!imageHasData(img)) return;\n        return img.exifdata[tag];\n    }\n    \n    EXIF.getIptcTag = function(img, tag) {\n        if (!imageHasData(img)) return;\n        return img.iptcdata[tag];\n    }\n\n    EXIF.getAllTags = function(img) {\n        if (!imageHasData(img)) return {};\n        var a,\n            data = img.exifdata,\n            tags = {};\n        for (a in data) {\n            if (data.hasOwnProperty(a)) {\n                tags[a] = data[a];\n            }\n        }\n        return tags;\n    }\n    \n    EXIF.getAllIptcTags = function(img) {\n        if (!imageHasData(img)) return {};\n        var a,\n            data = img.iptcdata,\n            tags = {};\n        for (a in data) {\n            if (data.hasOwnProperty(a)) {\n                tags[a] = data[a];\n            }\n        }\n        return tags;\n    }\n\n    EXIF.pretty = function(img) {\n        if (!imageHasData(img)) return \"\";\n        var a,\n            data = img.exifdata,\n            strPretty = \"\";\n        for (a in data) {\n            if (data.hasOwnProperty(a)) {\n                if (typeof data[a] == \"object\") {\n                    if (data[a] instanceof Number) {\n                        strPretty += a + \" : \" + data[a] + \" [\" + data[a].numerator + \"/\" + data[a].denominator + \"]\\r\\n\";\n                    } else {\n                        strPretty += a + \" : [\" + data[a].length + \" values]\\r\\n\";\n                    }\n                } else {\n                    strPretty += a + \" : \" + data[a] + \"\\r\\n\";\n                }\n            }\n        }\n        return strPretty;\n    }\n\n    EXIF.readFromBinaryFile = function(file) {\n        return findEXIFinJPEG(file);\n    }\n\n    if (typeof define === 'function' && define.amd) {\n        define('exif-js', [], function() {\n            return EXIF;\n        });\n    }\n}.call(this));\n\n"],"sourceRoot":""}